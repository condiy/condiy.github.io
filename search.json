[{"title":"Async/Await å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥","url":"https://xivier.github.io/2019/07/22/Asyncå’ŒAwaitå¦‚ä½•é€šè¿‡åŒæ­¥å®ç°å¼‚æ­¥/","content":"<h3 id=\"å‰ç½®çŸ¥è¯†ç‚¹\"><a href=\"#å‰ç½®çŸ¥è¯†ç‚¹\" class=\"headerlink\" title=\"å‰ç½®çŸ¥è¯†ç‚¹\"></a>å‰ç½®çŸ¥è¯†ç‚¹</h3><ul>\n<li>åŒæ­¥</li>\n<li>å¼‚æ­¥</li>\n<li>Async/Await</li>\n</ul>\n<p>é¦–å…ˆï¼Œ<strong>js æ˜¯å•çº¿ç¨‹çš„ï¼ˆé‡å¤ä¸‰éï¼‰</strong>ï¼Œæ‰€è°“å•çº¿ç¨‹ï¼Œ é€šä¿—çš„è®²å°±æ˜¯ï¼Œä¸€æ ¹ç­‹ï¼ˆæ¯”å–»æœ‰ç‚¹è¿‡åˆ†ï¼Œå“ˆå“ˆï¼‰æ‰§è¡Œä»£ç æ˜¯ä¸€è¡Œä¸€è¡Œçš„å¾€ä¸‹èµ°ï¼ˆå³æ‰€è°“çš„<strong>åŒæ­¥</strong>ï¼‰ï¼Œ å¦‚æœä¸Šé¢çš„æ²¡æ‰§è¡Œå®Œï¼Œå°±ç—´ç—´çš„ç­‰ç€ï¼ˆæ˜¯ä¸æ˜¯å¾ˆåƒæ‹çˆ±ä¸­åœ¨è·¯è¾¹ç­‰å¥¹/ä»–çš„ä½ ï¼Œå‡è£… new äº†ä¸ªå¯¹è±¡ï¼Œå•Šå“ˆå“ˆå“ˆï¼Œè°ƒçš®ä¸€ä¸‹å¾ˆå¼€å¿ƒï¼‰ï¼Œ è¿˜æ˜¯ä¸¾ä¸ª ğŸŒ° å§ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> d = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1e8</span>; i++) &#123;&#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">Date</span>.now() - d); <span class=\"comment\">// 62mså·¦å³</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> d = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">Date</span>.now() - d); <span class=\"comment\">// 0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test();</span><br><span class=\"line\">test1();</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»…ä»…æ˜¯ä¸€ä¸ª for å¾ªç¯ï¼Œè€Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¼šæœ‰å¤§é‡çš„ç½‘ç»œè¯·æ±‚ï¼Œå®ƒçš„å“åº”æ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä¹Ÿè¦ç—´ç—´çš„ç­‰ä¹ˆï¼Ÿæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ï¼Œå› è€Œ js è®¾è®¡äº†å¼‚æ­¥ï¼Œå³ å‘èµ·ç½‘ç»œè¯·æ±‚ï¼ˆè¯¸å¦‚ IO æ“ä½œï¼Œå®šæ—¶å™¨ï¼‰ï¼Œç”±äºéœ€è¦ç­‰æœåŠ¡å™¨å“åº”ï¼Œå°±å…ˆä¸ç†ä¼šï¼Œè€Œæ˜¯å»åšå…¶ä»–çš„äº‹å„¿ï¼Œç­‰è¯·æ±‚è¿”å›äº†ç»“æœçš„æ—¶å€™å†è¯´ï¼ˆå³<strong>å¼‚æ­¥</strong>ï¼‰ã€‚ é‚£ä¹ˆå¦‚ä½•å®ç°å¼‚æ­¥å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬å¹³æ—¶å·²ç»åœ¨å¤§é‡ä½¿ç”¨äº†ï¼Œé‚£å°±æ˜¯ <code>callback</code>ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">  url: <span class=\"string\">'http://xxx'</span>,</span><br><span class=\"line\">  success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>success ä½œä¸ºå‡½æ•°ä¼ é€’è¿‡å»å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰è¯·æ±‚æˆåŠŸäº†æ‰æ‰§è¡Œï¼Œå³<strong>å›è°ƒå‡½æ•°</strong>ï¼ˆcallbackï¼‰ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\">fs.rename(<span class=\"string\">'æ—§æ–‡ä»¶.txt'</span>, <span class=\"string\">'æ–°æ–‡ä»¶.txt'</span>, err =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'é‡å‘½åå®Œæˆ'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å’Œç½‘ç»œè¯·æ±‚ç±»ä¼¼ï¼Œç­‰åˆ° IO æ“ä½œæœ‰äº†ç»“æœï¼ˆæ— è®ºæˆåŠŸä¸å¦ï¼‰æ‰ä¼šæ‰§è¡Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼š<code>(err)=&gt;{}</code></p>\n<p>ä»ä¸Šé¢æˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºï¼Œå®ç°å¼‚æ­¥çš„æ ¸å¿ƒå°±æ˜¯å›è°ƒé’©å­ï¼Œå°† cb ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¼‚æ­¥æ‰§è¡Œå‡½æ•°ï¼Œå½“æœ‰äº†ç»“æœååœ¨è§¦å‘ cbã€‚æƒ³äº†è§£æ›´å¤šï¼Œå»çœ‹çœ‹ <code>event-loop</code> æœºåˆ¶å§ã€‚</p>\n<p>è‡³äº async/await æ˜¯å¦‚ä½•å‡ºç°çš„å‘¢ï¼Œåœ¨ es6 ä¹‹å‰ï¼Œå¤§å¤š js æ•°é¡¹ç›®ä¸­ä¼šæœ‰ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax1(url, () =&gt; &#123;</span><br><span class=\"line\">  ajax2(url, () =&gt; &#123;</span><br><span class=\"line\">    ajax3(url, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"comment\">// do something</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>\n\n<p>è¿™ç§å‡½æ•°åµŒå¥—ï¼Œå¤§é‡çš„å›è°ƒå‡½æ•°ï¼Œä½¿ä»£ç é˜…è¯»èµ·æ¥æ™¦æ¶©éš¾æ‡‚ï¼Œä¸ç›´è§‚ï¼Œå½¢è±¡çš„ç§°ä¹‹ä¸º<strong>å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰</strong>ï¼Œæ‰€ä»¥ä¸ºäº†åœ¨å†™æ³•ä¸Šèƒ½æ›´é€šä¿—ä¸€ç‚¹ï¼Œes6+é™†ç»­å‡ºç°äº† <code>Promise</code>ã€<code>Generator</code>ã€<code>Async/await</code>ï¼ŒåŠ›æ±‚åœ¨å†™æ³•ä¸Šç®€æ´æ˜äº†ï¼Œå¯è¯»æ€§å¼ºã€‚</p>\n<p>=========================æˆ‘æ˜¯åˆ†å‰²çº¿==========================</p>\n<p>ä»¥ä¸Šåªæ˜¯é“ºå«ï¼Œä¸‹é¢åœ¨è¿›å…¥æ­£é¢˜ ğŸ‘‡ï¼Œå¼€å§‹è¯´é“è¯´é“ä¸»è§’ï¼š<code>async/await</code></p>\n<p>=========================æˆ‘æ˜¯åˆ†å‰²çº¿==========================</p>\n<p><code>async/await</code> æ˜¯å‚ç…§ <code>Generator</code> å°è£…çš„ä¸€å¥—å¼‚æ­¥å¤„ç†æ–¹æ¡ˆï¼Œå¯ä»¥ç†è§£ä¸º <code>Generator</code> çš„è¯­æ³•ç³–ï¼Œ</p>\n<p>æ‰€ä»¥äº†è§£ <code>async/await</code> å°±ä¸å¾—ä¸è®²ä¸€è®² <code>Generator</code>,</p>\n<p>è€Œ <code>Generator</code> åˆä¾èµ–äºè¿­ä»£å™¨<code>Iterator</code>ï¼Œ</p>\n<p>æ‰€ä»¥å°±å¾—å…ˆè®²ä¸€è®² <code>Iterator</code>,</p>\n<p>è€Œ <code>Iterator</code> çš„æ€æƒ³å‘¢åˆæ¥æºäºå•å‘é“¾è¡¨ï¼Œ</p>\n<p>ç»ˆäºæ‰¾åˆ°æºå¤´äº†ï¼šå•å‘é“¾è¡¨</p>\n<h2 id=\"1-å•å‘é“¾è¡¨\"><a href=\"#1-å•å‘é“¾è¡¨\" class=\"headerlink\" title=\"1. å•å‘é“¾è¡¨\"></a>1. å•å‘é“¾è¡¨</h2><blockquote>\n<p>wikiï¼šé“¾è¡¨ï¼ˆLinked listï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§<a href=\"https://link.juejin.im?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E7%BA%BF%E6%80%A7%E8%A1%A8\" target=\"_blank\" rel=\"noopener\">çº¿æ€§è¡¨</a>ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŒ‰çº¿æ€§çš„é¡ºåºå‚¨å­˜æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡Œå­˜åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„<a href=\"https://link.juejin.im?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E6%8C%87%E6%A8%99_(%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8)\" target=\"_blank\" rel=\"noopener\">æŒ‡é’ˆ</a>ï¼ˆPointerï¼‰ã€‚ç”±äºä¸å¿…é¡»æŒ‰é¡ºåºå‚¨å­˜ï¼Œé“¾è¡¨åœ¨æ’å…¥çš„æ—¶å€™å¯ä»¥è¾¾åˆ° o(1)çš„å¤æ‚åº¦ï¼Œæ¯”å¦ä¸€ç§çº¿æ€§è¡¨<a href=\"https://link.juejin.im?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%E9%A1%BA%E5%BA%8F%E8%A1%A8\" target=\"_blank\" rel=\"noopener\">é¡ºåºè¡¨</a>å¿«å¾—å¤šï¼Œä½†æ˜¯æŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…è®¿é—®ç‰¹å®šç¼–å·çš„èŠ‚ç‚¹åˆ™éœ€è¦ o(n)çš„æ—¶é—´ï¼Œè€Œé¡ºåºè¡¨å“åº”çš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ o(logn)å’Œ o(1)ã€‚</p>\n</blockquote>\n<p>æ€»ç»“ä¸€ä¸‹é“¾è¡¨ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>æ— éœ€é¢„å…ˆåˆ†é…å†…å­˜</li>\n<li>æ’å…¥/åˆ é™¤èŠ‚ç‚¹ä¸å½±å“å…¶ä»–èŠ‚ç‚¹ï¼Œæ•ˆç‡é«˜ï¼ˆå…¸å‹çš„ä¾‹å­ï¼šdom æ“ä½œï¼‰</li>\n</ul>\n<p>å•å‘é“¾è¡¨ï¼šæ˜¯é“¾è¡¨ä¸­æœ€ç®€å•çš„ä¸€ç§ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªåŸŸï¼Œä¸€ä¸ªä¿¡æ¯åŸŸå’Œä¸€ä¸ªæŒ‡é’ˆåŸŸã€‚è¿™ä¸ªé“¾æ¥æŒ‡å‘åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæœ€åä¸€ä¸ªèŠ‚ç‚¹åˆ™æŒ‡å‘ä¸€ä¸ªç©ºå€¼ã€‚ </p>\n<p><img src=\"assets/16bf5d9e13d0e4b1\" alt=\"image\"></p>\n<p> ä¸€ä¸ªå•å‘é“¾è¡¨åŒ…å«ä¸¤ä¸ªå€¼: å½“å‰èŠ‚ç‚¹çš„å€¼å’Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥</p>\n<p>å•é“¾ç‰¹ç‚¹ï¼šèŠ‚ç‚¹çš„é“¾æ¥æ–¹å‘æ˜¯å•å‘çš„ï¼›ç›¸å¯¹äºæ•°ç»„æ¥è¯´ï¼Œå•é“¾è¡¨çš„çš„éšæœºè®¿é—®é€Ÿåº¦è¾ƒæ…¢ï¼Œä½†æ˜¯å•é“¾è¡¨åˆ é™¤/æ·»åŠ æ•°æ®çš„æ•ˆç‡å¾ˆé«˜ã€‚</p>\n<p>ç†è§£ js åŸå‹é“¾/ä½œç”¨åŸŸé“¾çš„è¯ï¼Œç†è§£è¿™ä¸ªå¾ˆå®¹æ˜“ï¼Œä»–ä»¬æ˜¯ç›¸é€šçš„ã€‚ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ—¶å›ºå®šçš„ï¼Œæ‰€ä»¥æ•°ç»„ä¸­çš„å¢åŠ å’Œåˆ é™¤æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦é¢‘ç¹çš„ç§»åŠ¨æ•°ç»„ä¸­çš„å…¶ä»–å…ƒç´ ï¼Œè€Œ js ä½œä¸ºä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œæ•°ç»„æœ¬è´¨æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œä¸éœ€è¦é¢„å…ˆåˆ†é…å†…å­˜</p>\n<p>é‚£ä¹ˆå¦‚ä½•è®¾è®¡ä¸€ä¸ªå•å‘é“¾è¡¨å‘¢ï¼Ÿè¿™ä¸ªå–å†³äºæˆ‘ä»¬éœ€è¦å“ªäº›æ“ä½œï¼Œé€šå¸¸æœ‰ï¼š</p>\n<ul>\n<li>append(element)ï¼šè¿½åŠ èŠ‚ç‚¹</li>\n<li>insert(element,index)ï¼šåœ¨ç´¢å¼•ä½ç½®æ’å…¥èŠ‚ç‚¹</li>\n<li>remove(element)ï¼šåˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„èŠ‚ç‚¹</li>\n<li>removeAt(index)ï¼šåˆ é™¤æŒ‡å®šç´¢å¼•èŠ‚ç‚¹</li>\n<li>removeAll(element)ï¼šåˆ é™¤æ‰€æœ‰åŒ¹é…çš„èŠ‚ç‚¹</li>\n<li>get(index)ï¼šè·å–æŒ‡å®šç´¢å¼•çš„èŠ‚ç‚¹ä¿¡æ¯</li>\n<li>set(element,index)ï¼šä¿®æ”¹æŒ‡å®šç´¢å¼•çš„èŠ‚ç‚¹å€¼</li>\n<li>indexOf(element)ï¼šè·å–æŸèŠ‚ç‚¹çš„ç´¢å¼•ä½ç½®</li>\n<li>clear()ï¼šæ¸…é™¤æ‰€æœ‰èŠ‚ç‚¹</li>\n<li>length()ï¼šè¿”å›èŠ‚ç‚¹é•¿åº¦</li>\n<li>printf()ï¼šæ‰“å°èŠ‚ç‚¹ä¿¡æ¯</li>\n</ul>\n<p>çœ‹åˆ°è¿™äº›æ–¹æ³•æ˜¯ä¸æ˜¯æœ‰äº›è®¸ç†Ÿæ‚‰ï¼Œå½“ä½ ç”¨åŸç”Ÿ js æˆ– jq æ—¶å¸¸ä¼šç”¨ä¸Šé¢ç±»ä¼¼çš„æ–¹æ³•ï¼Œç°åœ¨æ ¹æ®ä¸Šé¢åˆ—å‡ºçš„æ–¹æ³•è¿›è¡Œå®ç°ä¸€ä¸ªå•å‘é“¾ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// èŠ‚ç‚¹æ¨¡å‹</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkNode</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(element, next) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.element = element;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = next;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._head = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._size = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._errorBoundary = <span class=\"keyword\">this</span>._errorBoundary.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._getNodeByIndex = <span class=\"keyword\">this</span>._getNodeByIndex.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.append = <span class=\"keyword\">this</span>.append.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.insert = <span class=\"keyword\">this</span>.insert.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.remove = <span class=\"keyword\">this</span>.remove.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.removeAt = <span class=\"keyword\">this</span>.removeAt.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.removeAll = <span class=\"keyword\">this</span>.removeAll.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getElement = <span class=\"keyword\">this</span>.getElement.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setIndex = <span class=\"keyword\">this</span>.setIndex.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.indexOf = <span class=\"keyword\">this</span>.indexOf.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.clear = <span class=\"keyword\">this</span>.clear.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.length = <span class=\"keyword\">this</span>.length.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.printf = <span class=\"keyword\">this</span>.printf.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// è¾¹ç•Œæ£€éªŒ</span></span><br><span class=\"line\">  _errorBoundary(index) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span> || index &gt;= <span class=\"keyword\">this</span>._size) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"string\">`è¶…å‡ºè¾¹ç•Œ(<span class=\"subst\">$&#123;<span class=\"number\">0</span>&#125;</span>~<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>._size&#125;</span>)ï¼Œç›®æ ‡ä½ç½®<span class=\"subst\">$&#123;index&#125;</span>ä¸å­˜åœ¨ï¼`</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å¯¹è±¡</span></span><br><span class=\"line\">  _getNodeByIndex(index) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._errorBoundary(index);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = <span class=\"keyword\">this</span>._head;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; index; i++) &#123;</span><br><span class=\"line\">      obj = obj.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// è¿½åŠ èŠ‚ç‚¹</span></span><br><span class=\"line\">  append(element) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>._size === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._head = <span class=\"keyword\">new</span> LinkNode(element, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> obj = <span class=\"keyword\">this</span>._getNodeByIndex(<span class=\"keyword\">this</span>._size - <span class=\"number\">1</span>);</span><br><span class=\"line\">      obj.next = <span class=\"keyword\">new</span> LinkNode(element, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._size++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// åœ¨ç´¢å¼•ä½ç½®æ’å…¥èŠ‚ç‚¹</span></span><br><span class=\"line\">  insert(element, index) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._head = <span class=\"keyword\">new</span> LinkNode(element, <span class=\"keyword\">this</span>._head);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> obj = <span class=\"keyword\">this</span>._getNodeByIndex(index - <span class=\"number\">1</span>);</span><br><span class=\"line\">      obj.next = <span class=\"keyword\">new</span> LinkNode(element, obj.next);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._size++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">  remove(element) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>._size &lt; <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>._head.element == element) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._head.element = <span class=\"keyword\">this</span>._head.next;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._size--;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> element;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> temp = <span class=\"keyword\">this</span>._head;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (temp.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (temp.next.element == element) &#123;</span><br><span class=\"line\">          temp.next = temp.next.next;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>._size--;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> element;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          temp = temp.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// åˆ é™¤æŒ‡å®šç´¢å¼•èŠ‚ç‚¹</span></span><br><span class=\"line\">  removeAt(index) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._errorBoundary(index);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      element = <span class=\"keyword\">this</span>._head.element;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._head = <span class=\"keyword\">this</span>._head.next;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> prev = <span class=\"keyword\">this</span>._getNodeByIndex(index - <span class=\"number\">1</span>);</span><br><span class=\"line\">      element = prev.next.element;</span><br><span class=\"line\">      prev.next = prev.next.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._size--;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> element;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// åˆ é™¤æ‰€æœ‰åŒ¹é…çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">  removeAll(element) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> v_head = <span class=\"keyword\">new</span> LinkNode(<span class=\"literal\">null</span>, <span class=\"keyword\">this</span>._head);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tempNode = v_head;</span><br><span class=\"line\">    <span class=\"comment\">// let tempEle = null;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (tempNode.next) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tempNode.next.element == element) &#123;</span><br><span class=\"line\">        tempNode.next = tempNode.next.next;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._size--;</span><br><span class=\"line\">        <span class=\"comment\">// tempEle = element;</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        tempNode = tempNode.next;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._head = v_head.next;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// è·å–æŒ‡å®šç´¢å¼•çš„èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class=\"line\">  getElement(index) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._getNodeByIndex(index).element;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ä¿®æ”¹æŒ‡å®šç´¢å¼•çš„èŠ‚ç‚¹å€¼</span></span><br><span class=\"line\">  setIndex(element, index) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._errorBoundary(index);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = <span class=\"keyword\">this</span>._getNodeByIndex(index);</span><br><span class=\"line\">    obj.element = element;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// è·å–æŸèŠ‚ç‚¹çš„ç´¢å¼•ä½ç½®</span></span><br><span class=\"line\">  indexOf(element) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = <span class=\"keyword\">this</span>._head;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>._size; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (obj.element == element) &#123;</span><br><span class=\"line\">        index = i;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      obj = obj.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> index;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ¸…é™¤æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class=\"line\">  clear() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._head = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>._size = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›èŠ‚ç‚¹é•¿åº¦</span></span><br><span class=\"line\">  length() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._size;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ‰“å°èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class=\"line\">  printf() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = <span class=\"keyword\">this</span>._head;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> arr = [];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (obj != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      arr.push(obj.element);</span><br><span class=\"line\">      obj = obj.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> str = arr.join(<span class=\"string\">'-&gt;'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> str || <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj = <span class=\"keyword\">new</span> LinkedList();</span><br><span class=\"line\">obj.append(<span class=\"number\">0</span>);</span><br><span class=\"line\">obj.append(<span class=\"number\">1</span>);</span><br><span class=\"line\">obj.append(<span class=\"number\">2</span>);</span><br><span class=\"line\">obj.printf();</span><br><span class=\"line\"><span class=\"comment\">// \"0-&gt;1-&gt;2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.insert(<span class=\"number\">3</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">obj.printf();</span><br><span class=\"line\"><span class=\"comment\">// \"0-&gt;1-&gt;2-&gt;3\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.remove(<span class=\"number\">3</span>);</span><br><span class=\"line\">obj.printf();</span><br><span class=\"line\"><span class=\"comment\">// \"0-&gt;1-&gt;2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.removeAt(<span class=\"number\">0</span>);</span><br><span class=\"line\">obj.printf();</span><br><span class=\"line\"><span class=\"comment\">// \"1-&gt;2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.setIndex(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">obj.printf();</span><br><span class=\"line\"><span class=\"comment\">// \"0-&gt;2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.indexOf(<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.length();</span><br><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj.clear();</span><br><span class=\"line\">obj.printf();</span><br><span class=\"line\"><span class=\"comment\">// null</span></span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡ä»¥ä¸Šï¼Œæˆ‘å‡è£…ä½ æ˜ç™½ä»€ä¹ˆæ˜¯å•å‘é“¾è¡¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿç”¨ä»£ç å®ç°ä¸€ä¸ªå•å‘é“¾è¡¨äº†ï¼Œä¸‹ä¸€æ­¥å¼€å§‹è¯´ä¸€è¯´<strong>è¿­ä»£å™¨</strong> <code>Iterator</code></p>\n<h2 id=\"2-Iterator\"><a href=\"#2-Iterator\" class=\"headerlink\" title=\"2. Iterator\"></a>2. Iterator</h2><p><code>Iterator</code> ç¿»è¯‘è¿‡æ¥å°±æ˜¯<strong>è¿­ä»£å™¨ï¼ˆéå†å™¨ï¼‰</strong>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®ƒçš„éå†è¿‡ç¨‹(ç±»ä¼¼äºå•å‘é“¾è¡¨)ï¼š</p>\n<ul>\n<li>åˆ›å»ºä¸€ä¸ª<strong>æŒ‡é’ˆå¯¹è±¡</strong>ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®</li>\n<li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œå°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜</li>\n<li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œå°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜</li>\n<li>ä¸æ–­çš„è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®</li>\n</ul>\n<p>ä¸€ä¸ªå¯¹è±¡è¦å˜æˆå¯è¿­ä»£çš„ï¼Œå¿…é¡»å®ç° <code>iterator</code> æ–¹æ³•ï¼Œå³å¯¹è±¡ï¼ˆæˆ–å®ƒåŸå‹é“¾ä¸Šçš„æŸä¸ªå¯¹è±¡ï¼‰å¿…é¡»æœ‰ä¸€ä¸ªåå­—æ˜¯ <code>Symbol.iterator</code> çš„å±æ€§ï¼ˆåŸç”Ÿå…·æœ‰è¯¥å±æ€§çš„æœ‰ï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€ç±»æ•°ç»„çš„å¯¹è±¡ã€Set å’Œ Mapï¼‰ï¼š</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">å±æ€§</th>\n<th align=\"left\">å€¼</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">[Symbol.iterator]:</td>\n<td align=\"left\">è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ— å‚å‡½æ•°ï¼Œè¢«è¿”å›å¯¹è±¡ç¬¦åˆè¿­ä»£å™¨åè®®</td>\n</tr>\n</tbody></table>\n<p>å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦è¢«è¿­ä»£çš„æ—¶å€™ï¼ˆæ¯”å¦‚å¼€å§‹ç”¨äºä¸€ä¸ª <code>for..of</code> å¾ªç¯ä¸­ï¼‰ï¼Œå®ƒçš„ <code>iterator</code> æ–¹æ³•è¢«è°ƒç”¨å¹¶ä¸”æ— å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”¨äºåœ¨è¿­ä»£ä¸­è·å¾—å€¼çš„è¿­ä»£å™¨</p>\n<p>è¿­ä»£å™¨åè®®ï¼šäº§ç”Ÿä¸€ä¸ªæœ‰é™æˆ–æ— é™åºåˆ—çš„å€¼ï¼Œå¹¶ä¸”å½“æ‰€æœ‰çš„å€¼éƒ½å·²ç»è¢«è¿­ä»£åï¼Œå°±ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„è¿”å›å€¼</p>\n<p>å½“ä¸€ä¸ªå¯¹è±¡åªæœ‰æ»¡è¶³ä¸‹è¿°æ¡ä»¶æ‰ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼š</p>\n<p>å®ƒå®ç°äº†ä¸€ä¸ª <code>next()</code> çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•<strong>å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡</strong>,å¯¹è±¡æœ‰ä¸¤ä¸ªå¿…è¦çš„å±æ€§ï¼š</p>\n<ul>\n<li><p><code>done</code>ï¼ˆboolï¼‰ </p>\n<ul>\n<li>trueï¼šè¿­ä»£å™¨å·²ç»è¶…è¿‡äº†å¯è¿­ä»£æ¬¡æ•°ã€‚è¿™ç§æƒ…å†µä¸‹,value çš„å€¼å¯ä»¥è¢«çœç•¥</li>\n<li>å¦‚æœè¿­ä»£å™¨å¯ä»¥äº§ç”Ÿåºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œåˆ™ä¸º falseã€‚è¿™ç­‰æ•ˆäºæ²¡æœ‰æŒ‡å®š done è¿™ä¸ªå±æ€§</li>\n</ul>\n</li>\n<li><p><code>value</code> è¿­ä»£å™¨è¿”å›çš„ä»»ä½• JavaScript å€¼ã€‚done ä¸º true æ—¶å¯çœç•¥</p>\n</li>\n</ul>\n<p>æ ¹æ®ä¸Šé¢çš„è§„åˆ™ï¼Œå’±ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªç®€å•çš„è¿­ä»£å™¨ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> makeIterator = <span class=\"function\"><span class=\"params\">arr</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> nextIndex = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    next: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">      nextIndex &lt; arr.length</span><br><span class=\"line\">        ? &#123; <span class=\"attr\">value</span>: arr[nextIndex++], <span class=\"attr\">done</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">        : &#123; <span class=\"attr\">value</span>: <span class=\"literal\">undefined</span>, <span class=\"attr\">done</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> it = makeIterator([<span class=\"string\">'äººæœˆ'</span>, <span class=\"string\">'ç¥è¯'</span>]);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(it.next()); <span class=\"comment\">// &#123; value: \"äººæœˆ\", done: false &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(it.next()); <span class=\"comment\">// &#123; value: \"ç¥è¯\", done: false &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(it.next()); <span class=\"comment\">// &#123;value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myIterable = &#123;&#125;;</span><br><span class=\"line\">myIterable[<span class=\"built_in\">Symbol</span>.iterator] = <span class=\"function\"><span class=\"keyword\">function</span>*(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> value <span class=\"keyword\">of</span> myIterable) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(value);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"comment\">// 3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//or</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([...myIterable]); <span class=\"comment\">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>\n\n<p>äº†è§£äº†è¿­ä»£å™¨ï¼Œä¸‹é¢å¯ä»¥è¿›ä¸€æ­¥äº†è§£ç”Ÿæˆå™¨äº†</p>\n<h2 id=\"3-Generator\"><a href=\"#3-Generator\" class=\"headerlink\" title=\"3. Generator\"></a>3. Generator</h2><p><code>Generator</code>ï¼šç”Ÿæˆå™¨å¯¹è±¡æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼ˆGeneratorFunctionï¼‰è¿”å›çš„ï¼Œå®ƒç¬¦åˆ<strong>å¯è¿­ä»£åè®®</strong>å’Œ<strong>è¿­ä»£å™¨åè®®</strong>ï¼Œæ—¢æ˜¯è¿­ä»£å™¨ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨ <code>next</code> æ–¹æ³•ï¼Œä½†å®ƒä¸æ˜¯å‡½æ•°ï¼Œæ›´ä¸æ˜¯æ„é€ å‡½æ•°</p>\n<p>ç”Ÿæˆå™¨å‡½æ•°ï¼ˆGeneratorFunctionï¼‰ï¼š</p>\n<blockquote>\n<p>function* name([param[, param[, â€¦ param]]]) { statements }</p>\n<ul>\n<li>nameï¼šå‡½æ•°å</li>\n<li>paramï¼šå‚æ•°</li>\n<li>statementsï¼šjs è¯­å¥</li>\n</ul>\n</blockquote>\n<p>è°ƒç”¨ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°å¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œå®ƒé‡Œé¢çš„è¯­å¥ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªè¿™ä¸ªç”Ÿæˆå™¨çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œå½“è¿™ä¸ªè¿­ä»£å™¨çš„ <code>next()</code> æ–¹æ³•è¢«é¦–æ¬¡ï¼ˆåç»­ï¼‰è°ƒç”¨æ—¶ï¼Œå…¶å†…çš„è¯­å¥ä¼šæ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªï¼ˆåç»­ï¼‰å‡ºç° <code>yield</code> çš„ä½ç½®ä¸ºæ­¢ï¼ˆè®©æ‰§è¡Œå¤„äº<strong>æš‚åœçŠ¶</strong>ï¼‰ï¼Œ<code>yield</code> åç´§è·Ÿè¿­ä»£å™¨è¦è¿”å›çš„å€¼ã€‚æˆ–è€…å¦‚æœç”¨çš„æ˜¯ <code>yield*</code>ï¼ˆå¤šäº†ä¸ªæ˜Ÿå·ï¼‰ï¼Œåˆ™è¡¨ç¤ºå°†æ‰§è¡Œæƒç§»äº¤ç»™å¦ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼ˆå½“å‰ç”Ÿæˆå™¨<strong>æš‚åœæ‰§è¡Œ</strong>ï¼‰ï¼Œè°ƒç”¨ <code>next()</code> ï¼ˆå†å¯åŠ¨ï¼‰æ–¹æ³•æ—¶ï¼Œå¦‚æœä¼ å…¥äº†å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°ä¼šä½œä¸º<strong>ä¸Šä¸€æ¡æ‰§è¡Œçš„ yield è¯­å¥çš„è¿”å›å€¼</strong>ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">another</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"string\">'äººæœˆç¥è¯'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">gen</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span>* another(); <span class=\"comment\">// ç§»äº¤æ‰§è¡Œæƒ</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"keyword\">yield</span> <span class=\"string\">'hello'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> b = <span class=\"keyword\">yield</span> a; <span class=\"comment\">// a='world' æ˜¯ next('world') ä¼ å‚èµ‹å€¼ç»™äº†ä¸Šä¸€ä¸ª yidle 'hello' çš„å·¦å€¼</span></span><br><span class=\"line\">  <span class=\"keyword\">yield</span> b; <span class=\"comment\">// b=ï¼ æ˜¯ next('ï¼') ä¼ å‚èµ‹å€¼ç»™äº†ä¸Šä¸€ä¸ª yidle a çš„å·¦å€¼</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> g = gen();</span><br><span class=\"line\">g.next(); <span class=\"comment\">// &#123;value: \"äººæœˆç¥è¯\", done: false&#125;</span></span><br><span class=\"line\">g.next(); <span class=\"comment\">// &#123;value: \"hello\", done: false&#125;</span></span><br><span class=\"line\">g.next(<span class=\"string\">'world'</span>); <span class=\"comment\">// &#123;value: \"world\", done: false&#125; å°† 'world' èµ‹ç»™ä¸Šä¸€æ¡ yield 'hello' çš„å·¦å€¼ï¼Œå³æ‰§è¡Œ a='world'ï¼Œ</span></span><br><span class=\"line\">g.next(<span class=\"string\">'!'</span>); <span class=\"comment\">// &#123;value: \"!\", done: false&#125; å°† '!' èµ‹ç»™ä¸Šä¸€æ¡ yield a çš„å·¦å€¼ï¼Œå³æ‰§è¡Œ b='!'ï¼Œè¿”å› b</span></span><br><span class=\"line\">g.next(); <span class=\"comment\">// &#123;value: undefined, done: false&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œ<code>Generator</code> å’Œ <code>callback</code> æœ‰å•¥å…³ç³»ï¼Œå¦‚ä½•å¤„ç†å¼‚æ­¥å‘¢ï¼Ÿå…¶å®äºŒè€…æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œæˆ‘ä»¬åªæ˜¯é€šè¿‡ä¸€äº›æ–¹å¼å¼ºè¡Œçš„å®ƒä»¬äº§ç”Ÿäº†å…³ç³»ï¼Œæ‰ä¼šæœ‰ <code>Generator</code> å¤„ç†å¼‚æ­¥</p>\n<p>æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ <code>Generator</code> çš„æœ¬è´¨ï¼Œæš‚åœï¼Œå®ƒä¼šè®©ç¨‹åºæ‰§è¡Œåˆ°æŒ‡å®šä½ç½®å…ˆæš‚åœï¼ˆ<code>yield</code>ï¼‰ï¼Œç„¶åå†å¯åŠ¨ï¼ˆ<code>next</code>ï¼‰ï¼Œå†æš‚åœï¼ˆ<code>yield</code>ï¼‰ï¼Œå†å¯åŠ¨ï¼ˆ<code>next</code>ï¼‰ï¼Œè€Œè¿™ä¸ªæš‚åœå°±å¾ˆå®¹æ˜“è®©å®ƒå’Œå¼‚æ­¥æ“ä½œäº§ç”Ÿè”ç³»ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å¤„ç†å¼‚æ­¥æ—¶ï¼šå¼€å§‹å¼‚æ­¥å¤„ç†ï¼ˆç½‘ç»œæ±‚æƒ…ã€IO æ“ä½œï¼‰ï¼Œç„¶åæš‚åœä¸€ä¸‹ï¼Œç­‰å¤„ç†å®Œäº†ï¼Œå†è¯¥å¹²å˜›å¹²å˜›ã€‚ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>js æ˜¯å•çº¿ç¨‹çš„ï¼ˆåˆé‡å¤äº†ä¸‰éï¼‰</strong>ï¼Œå¼‚æ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œcallback è¿˜æ˜¯ callbackï¼Œä¸ä¼šå› ä¸º <code>Generator</code> è€Œæœ‰ä»»ä½•æ”¹å˜</p>\n<p>ä¸‹é¢æ¥çœ‹çœ‹ï¼Œç”¨ <code>Generator</code> å®ç°å¼‚æ­¥ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promisify = <span class=\"built_in\">require</span>(<span class=\"string\">'util'</span>).promisify;</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> readFile = promisify(fs.readFile);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = <span class=\"function\"><span class=\"keyword\">function</span>*(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res1 = <span class=\"keyword\">yield</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/a.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res2 = <span class=\"keyword\">yield</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/b.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res2);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> g = gen();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> g1 = g.next();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'g1:'</span>, g1);</span><br><span class=\"line\"></span><br><span class=\"line\">g1.value</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res1</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'res1:'</span>, res1);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> g2 = g.next(res1);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'g2:'</span>, g2);</span><br><span class=\"line\">    g2.value</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res2</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'res2:'</span>, res2);</span><br><span class=\"line\">        g.next(res2);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"params\">err2</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err2);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err1</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err1);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"comment\">// g1: &#123; value: Promise &#123; &lt;pending&gt; &#125;, done: false &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// res1: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   \"a\": 1</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   \"a\": 1</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// g2: &#123; value: Promise &#123; &lt;pending&gt; &#125;, done: false &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// res2: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   \"b\": 2</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   \"b\": 2</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ä¸Šä»£ç æ˜¯ <code>Generator</code> å’Œ <code>callback</code> ç»“åˆå®ç°çš„å¼‚æ­¥ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä»ç„¶éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ <code>.then</code> å±‚å±‚æ·»åŠ å›è°ƒï¼Œä½†ç”±äº <code>next()</code> æ–¹æ³•è¿”å›å¯¹è±¡ <code>{value: xxx,done: true/false}</code> æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€åŒ–å®ƒï¼Œå†™ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promisify = <span class=\"built_in\">require</span>(<span class=\"string\">'util'</span>).promisify;</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> readFile = promisify(fs.readFile);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\">gen</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> g = gen();</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = g.next(data);</span><br><span class=\"line\">    <span class=\"comment\">// æ·±åº¦é€’å½’ï¼Œåªè¦ `Generator` å‡½æ•°è¿˜æ²¡æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œ`next` å‡½æ•°å°±è°ƒç”¨è‡ªèº«</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (res.done) <span class=\"keyword\">return</span> res.value;</span><br><span class=\"line\">    res.value.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      next(data);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">run(<span class=\"function\"><span class=\"keyword\">function</span>*(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res1 = <span class=\"keyword\">yield</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/a.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res1);</span><br><span class=\"line\">  <span class=\"comment\">// &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   \"a\": 1</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> res2 = <span class=\"keyword\">yield</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/b.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res2);</span><br><span class=\"line\">  <span class=\"comment\">// &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   \"b\": 2</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæ€ä¹ˆè¿˜æ²¡æœ‰åˆ° <code>async/await</code>ï¼Œå®¢å®˜åˆ«æ€¥ï¼Œé©¬ä¸Šæ¥äº†ï¼ˆå…¶å®æˆ‘å·²ç»æ¼äº†ä¸€äº›å†…å®¹æ²¡è¯´ï¼šPromise å’Œ callback çš„å…³ç³»ï¼Œthunk å‡½æ•°ï¼Œco åº“ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å» google ä¸€ä¸‹ã€‚ï¼‰</p>\n<p>é¦–å…ˆï¼Œ<code>async/await</code> æ˜¯ <code>Generator</code> çš„è¯­æ³•ç³–ï¼Œä¸Šé¢<em>æˆ‘æ˜¯åˆ†å‰²çº¿</em>ä¸‹çš„ç¬¬ä¸€å¥å·²ç»è®²è¿‡ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹äºŒè€…çš„å¯¹æ¯”ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Generator</span></span><br><span class=\"line\">run(<span class=\"function\"><span class=\"keyword\">function</span>*(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res1 = <span class=\"keyword\">yield</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/a.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res2 = <span class=\"keyword\">yield</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/b.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res2);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// async/await</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> readFile = <span class=\"keyword\">async</span> ()=&gt;&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res1 = <span class=\"keyword\">await</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/a.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res2 = <span class=\"keyword\">await</span> readFile(path.resolve(__dirname, <span class=\"string\">'../data/b.json'</span>), &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'utf8'</span> &#125;);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'done'</span>ï¼›</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> res = readFile();</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>async function</code> ä»£æ›¿äº† <code>function*</code>ï¼Œ<code>await</code> ä»£æ›¿äº† <code>yield</code>ï¼ŒåŒæ—¶ä¹Ÿæ— éœ€è‡ªå·±æ‰‹å†™ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨ <code>run</code> äº†</p>\n<p>ç°åœ¨å†æ¥çœ‹çœ‹<code>async/await</code> çš„ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>å½“ <code>await</code> åé¢è·Ÿçš„æ˜¯ Promise å¯¹è±¡æ—¶ï¼Œæ‰ä¼šå¼‚æ­¥æ‰§è¡Œï¼Œå…¶å®ƒç±»å‹çš„æ•°æ®ä¼šåŒæ­¥æ‰§è¡Œ</li>\n<li>æ‰§è¡Œ <code>const res = readFile();</code> è¿”å›çš„ä»ç„¶æ˜¯ä¸ª Promise å¯¹è±¡ï¼Œä¸Šé¢ä»£ç ä¸­çš„ <code>return &#39;done&#39;;</code> ä¼šç›´æ¥è¢«ä¸‹é¢ <code>then</code> å‡½æ•°æ¥æ”¶åˆ°</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data); <span class=\"comment\">// done</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n","categories":["FrontEnd"],"tags":["JavaScript"]},{"title":"","url":"https://xivier.github.io/2019/07/21/ç¼–ç¨‹ç®—æ³•é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/diffç®—æ³•çš„ä¼˜åŒ–/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/v-foräº‹ä»¶ä»£ç†/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸‹åˆ—ä»£ç çš„æ‰“å°ç»“æœ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°æ·±æ‹·è´/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å‰ç«¯åŠ å¯†/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å¦‚ä½•å°†ES6ä»£ç è½¬ES5ä»£ç /","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Proxyå®ç°æ•°æ®ç»‘å®š/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ç§»åŠ¨é›¶/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ç§»åŠ¨ç«¯Retinaå±1pxåƒç´ é—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ‰§è¡Œé¡ºåº/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ç‚¹è°ƒç”¨å’Œæ‹¬å·è°ƒç”¨çš„æ€§èƒ½æ¯”è¾ƒ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ¯”è¾ƒopacity visibility displayçš„ä¼˜åŠ£/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Vueä¸­çš„Object.defineProperty/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/callå’Œalllyçš„åŒºåˆ«/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ¨¡æ‹Ÿå®ç°Promise.finally/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ—‹è½¬æ•°ç»„/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è¾“å‡ºè¿è¡Œç»“æœ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/forå’ŒforEach/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/inputé˜²æŠ–/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/react-routeré—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ•°ç»„é‡Œå–ç¬¬ä¸€ä¸ªå…ƒç´ å’Œç¬¬åä¸‡ä¸ªå…ƒç´ /","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ•°ç»„ç¼–ç¨‹é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è¾“å‡ºä¸‹åˆ—ä»£ç çš„æ‰§è¡Œç»“æœ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/var let const å®ç°åŸç†/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ‰“å°å¯¹ç§°æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/webpackçƒ­æ›´æ–°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ‰¾å‡ºé“¾æ¡ä¸­çš„çˆ¶ID/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/HTTPSä¸­é—´äººæ”»å‡»/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è®¾è®¡LazyManç±»/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°æ¨¡ç³Šæœç´¢/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Promise.all/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°tokenåŠ å¯†/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸¤æ•°ä¹‹å’Œ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°convertæ–¹æ³•/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°addå‡½æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸ºä»€ä¹ˆæŠŠreducerè®¾è®¡æˆçº¯å‡½æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°Promise.race/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¿®æ”¹å›¾ç‰‡çš„å®½åº¦ä¸º300px/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°add.minusåŠŸèƒ½/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å†’æ³¡æ’åºçš„å®ç°è¿‡ç¨‹/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/åˆ¤æ–­æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/åŒå‘ç»‘å®šå’ŒVuexæ˜¯å¦å†²çª/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å­—ç¬¦ä¸²çš„åŒ¹é…/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/åŸ‹ç‚¹è¯·æ±‚é—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å­—ç¬¦ä¸²å¤§å°å–å/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å¦‚ä½•å®ç°æ— ç¼è½®æ’­/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/BFC IFC GFC FFC/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å¦‚ä½•å°†é”€å”®é¢å­˜åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å¦‚ä½•è®©ä¸€ä¸ªdivæ°´å¹³å‚ç›´å±…ä¸­/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/sort()æ’åºé—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/HTTPSæ¡æ‰‹è¿‡ç¨‹/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä»£ç è¾“å‡ºä»€ä¹ˆ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/HTTPSæ¡æ‰‹ä¸­è¯ä¹¦æ ¡éªŒé—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸‹åˆ—ä»£ç æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å®ç°ä¸€ä¸ªsleepå‡½æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Vueä¸­å­ç»„ä»¶ä¸ºä½•ä¸èƒ½ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„Prop/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Vueçš„åŒå‘ç»‘å®š/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸ºä»€ä¹ˆVuexçš„mutationå’ŒReduxçš„reducerä¸­ä¸èƒ½åšå¼‚æ­¥æ“ä½œ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ”¹é€ ä»£ç æ‰“å°10å’Œ20/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è¿­ä»£æ–¹å¼å®ç°flattenå‡½æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å…¨å±€ä½œç”¨åŸŸä¸­çš„constå’Œlet/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/BFC/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ¨¡å—åŒ–å‘å±•å†ç¨‹/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸‹é¢ä»£ç ä»€ä¹ˆæ—¶å€™ä¼šæ‰“å°1/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸‹é¢ä»£ç æ‰“å°ä»€ä¹ˆå†…å®¹/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/åˆå¹¶æ•°ç»„é—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æµè§ˆå™¨ç¼“å­˜è¯»å–è§„åˆ™/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è¾“å‡º0-9çš„æ‰€æœ‰å†™æ³•/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸ºä»€ä¹ˆä¸ä¼šåŠ«æŒtoken/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Virtual DOMé—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æµè§ˆå™¨å’ŒNodeäº‹ä»¶å¾ªç¯/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/è§‚å¯Ÿè€…æ¨¡å¼å’Œè®¢é˜…å‘å¸ƒè€…æ¨¡å¼/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/3ç§åˆ¤æ–­æ•°ç»„çš„æ–¹æ³•/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/npmæ¨¡å—å®‰è£…æœºåˆ¶/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Reduxå’ŒVuexçš„è®¾è®¡æ€æƒ³/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/é‡ç»˜å’Œå›æµ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸€é¢˜ç®—æ³•æ‰‹å†™é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Reactä¸­çš„setStateé—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/Promiseæ„é€ å‡½æ•°çš„æ‰§è¡Œ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/TCPä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸€é¢˜å…³äºReactä¸­çš„setStateç¬”è¯•é¢˜/","content":"<p>F</p>\n","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/JSå¼‚æ­¥è§£å†³æ–¹æ¡ˆ/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ä¸€é¢˜å¼‚æ­¥ç¬”è¯•é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/http2å¤šè·¯å¯Œç”¨/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/é‡å¯åTCPçŠ¶æ€é—®é¢˜/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/å¦‚ä½•å®ç°new/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ·±åº¦ä¼˜å…ˆæ€æƒ³å’Œå¹¿åº¦ä¼˜å…ˆæ€æƒ³å®ç°æ‹·è´å‡½æ•°/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/ES5å’ŒES6ä¸­çš„ç»§æ‰¿/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†/","content":"","categories":[],"tags":[]},{"title":"","url":"https://xivier.github.io/2019/07/21/é˜²æŠ–å’ŒèŠ‚æµ/","content":"","categories":[],"tags":[]},{"title":"Reactå’ŒVueä¸­çš„keyå€¼é—®é¢˜","url":"https://xivier.github.io/2019/07/01/Reactå’ŒVueä¸­çš„keyå€¼é—®é¢˜/","content":"","categories":["algorithm"],"tags":["LeetCode"]},{"title":"äºŒåˆ†æŸ¥æ‰¾","url":"https://xivier.github.io/2019/06/30/äºŒåˆ†æŸ¥æ‰¾/","content":"<h1 id=\"åŸå§‹äºŒåˆ†æŸ¥æ‰¾\"><a href=\"#åŸå§‹äºŒåˆ†æŸ¥æ‰¾\" class=\"headerlink\" title=\"åŸå§‹äºŒåˆ†æŸ¥æ‰¾\"></a>åŸå§‹äºŒåˆ†æŸ¥æ‰¾</h1><blockquote>\n<p>Input : [1,2,3,4,5]<br>key : 3<br>return the index : 2</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> binarySearch = <span class=\"function\">(<span class=\"params\">nums, key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, h = nums.length - <span class=\"number\">1</span>, mid</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt;= h) &#123;</span><br><span class=\"line\">    mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[mid] === key) <span class=\"keyword\">return</span> mid</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (nums[mid] &gt; key) h = mid - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ—¶é—´å¤æ‚åº¦ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼Œæ¯æ¬¡å°†æŸ¥æ‰¾åŒºé—´å‡åŠï¼Œè¿™ç§æŠ˜åŠç‰¹æ€§çš„æ—¶é—´å¤æ‚åº¦ä¸º O(logN)</p>\n<p>è¿”å›å€¼ï¼š</p>\n<ul>\n<li>-1ï¼šè¡¨ç¤ºæ²¡æœ‰æŸ¥æ‰¾åˆ° keyã€‚</li>\n<li>lï¼šè¡¨ç¤ºæ’å…¥åˆ° nums ä¸­çš„æ­£ç¡®ä½ç½®ã€‚</li>\n</ul>\n<p>å˜ç§ï¼š</p>\n<p>äºŒåˆ†æŸ¥æ‰¾æœ‰å¾ˆå¤šå˜ç§ï¼Œå˜ç§è¦æ³¨æ„è¾¹ç•Œå€¼çš„åˆ¤æ–­ã€‚ä¾‹å¦‚åœ¨ä¸€ä¸ªæœ‰é‡å¤å…ƒç´ ä¸­çš„æ•°ç»„ä¸­æŸ¥æ‰¾æœ€å·¦è¾¹çš„ key å€¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> binarySearch = <span class=\"function\">(<span class=\"params\">nums, key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, h = nums.length - <span class=\"number\">1</span>, mid</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt; h) &#123;</span><br><span class=\"line\">    mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (key &lt;= nums[mid]) h = mid</span><br><span class=\"line\">    <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> l</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å’Œä¸Šè¿°çš„å®ç°æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p>\n<ul>\n<li>èµ‹å€¼è¡¨è¾¾å¼å˜æˆäº† h = mid</li>\n<li>å¾ªç¯è¯­å¥å˜æˆäº† l &lt; h</li>\n<li>æœ€åè¿”å›çš„æ˜¯ l</li>\n</ul>\n<p>å› ä¸ºè¦æ‰¾æœ€å·¦çš„å€¼ï¼Œæ‰€ä»¥è®¾ç½® key &lt;= nums[mid] æ—¶ï¼Œæœ€å·¦çš„åŒºé—´ä½äº [l,mid] ä¸­ï¼Œæ­¤æ—¶å°† h = midï¼Œå› ä¸º mid æ‰€åœ¨çš„ä½ç½®ä¹Ÿå¯ä»¥æ˜¯è§£ã€‚</p>\n<p>å¦‚æœè¦æ‰¾æœ€å³çš„å€¼ï¼Œåº”å½“è®¾ç½® key &gt;= nums[mid] æ—¶ï¼Œæœ€å³çš„åŒºé—´ä½äº [mid,h] ä¸­ï¼Œæ­¤æ—¶å°† l = midï¼Œå› ä¸º mid æ‰€åœ¨çš„ä½ç½®ä¹Ÿå¯ä»¥æ˜¯è§£ã€‚</p>\n<p>åœ¨ h = m æƒ…å†µä¸‹ï¼Œå¦‚æœå¾ªç¯æ¡ä»¶ä¸º l &lt;= hï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¼šå‡ºç°æ— é™å¾ªç¯æ— æ³•é€€å‡ºçš„æƒ…å†µã€‚</p>\n<h1 id=\"æ±‚å¼€æ–¹\"><a href=\"#æ±‚å¼€æ–¹\" class=\"headerlink\" title=\"æ±‚å¼€æ–¹\"></a>æ±‚å¼€æ–¹</h1><blockquote>\n<p>LeetCode 69</p>\n<p>Input: 4<br>Output: 2<br>Input: 8<br>Output: 2</p>\n<p>å¦‚æœå¼€æ–¹å¼€ä¸å°½ï¼Œå¼€æ–¹ç»“æœå‘ä¸‹å–æ•´ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mySqrt = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">1</span>, h = x</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt;= h) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> sqrt = <span class=\"built_in\">Math</span>.floor(x / mid)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sqrt === mid) <span class=\"keyword\">return</span> mid</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sqrt &lt; mid) h = mid - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> h</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ¥æŸ¥æ‰¾å¼€æ–¹æ•° sqrtï¼Œå› ä¸º sqrt * sqrt = xã€‚æ‰€ä»¥å¯ä»¥å¯¹ 1 -  x çš„åŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚</p>\n<p>æœ¬é¢˜å…³é”®æ˜¯æœ€åçš„è¿”å›å€¼ï¼Œé€€å‡ºå¾ªç¯æ—¶ï¼Œ l &gt; hï¼Œå½“å¼€æ–¹å¼€ä¸å°½çš„æ—¶å€™ï¼Œç»“æœå°±æ˜¯ h ï¼Œä¸ºä»€ä¹ˆæ˜¯ h ä¸æ˜¯ l å‘¢ï¼Ÿå¾ªç¯é€€å‡ºæ—¶ï¼Œ h æ€»æ˜¯æ¯” l å°1ï¼Œç”±äºæœ¬é¢˜è¦å‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥å– hã€‚</p>\n<h1 id=\"å¤§äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ \"><a href=\"#å¤§äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ \" class=\"headerlink\" title=\"å¤§äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ \"></a>å¤§äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ </h1><blockquote>\n<p>LeetCode 744</p>\n<p>Input:<br>letters = [â€œcâ€, â€œfâ€, â€œjâ€]<br>target = â€œdâ€<br>Output: â€œfâ€<br>Input:<br>letters = [â€œcâ€, â€œfâ€, â€œjâ€]<br>target = â€œkâ€<br>Output: â€œcâ€</p>\n<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªæœ‰åºçš„å­—ç¬¦æ•°ç»„ lettersï¼Œå†ç»™å®šä¸€ä¸ªå­—ç¬¦ targetï¼Œè¦æ±‚åœ¨ letters ä¸­æŸ¥æ‰¾å¤§äº target çš„æœ€å°å­—ç¬¦ã€‚å¦‚æœæ‰¾ä¸åˆ°å°±è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> nextGreatestLetter = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">letters, target</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, h = letters.length - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> mid</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt;= h) &#123;</span><br><span class=\"line\">    mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (letters[mid] &lt;= target) &#123;</span><br><span class=\"line\">      l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      h = mid - <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> l &lt; letters.length ? letters[l] : letters[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ç”±äºå­—ç¬¦æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œæ ¹æ®æœ‰åºæ•°ç»„æŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ï¼Œæƒ³åˆ°ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚</p>\n<h1 id=\"æœ‰åºæ•°ç»„çš„-Single-Element\"><a href=\"#æœ‰åºæ•°ç»„çš„-Single-Element\" class=\"headerlink\" title=\"æœ‰åºæ•°ç»„çš„ Single Element\"></a>æœ‰åºæ•°ç»„çš„ Single Element</h1><blockquote>\n<p>LeetCode 540</p>\n<p>Input: [1, 1, 2, 3, 3, 4, 4, 8, 8]<br>Output: 2</p>\n<p>ä¸€ä¸ªæœ‰åºæ•°ç»„åªæœ‰ä¸€ä¸ªæ•°ä¸å‡ºç°ä¸¤æ¬¡ï¼Œæ‰¾å‡ºè¿™ä¸ªæ•°</p>\n</blockquote>\n<p>æ—¶é—´å¤æ‚åº¦è¦æ±‚ O(logN)ï¼Œå› æ­¤å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚</p>\n<p>å‡è®¾index ä¸º Single Element å‡ºç°åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚åœ¨ index ä¹‹åï¼Œæ•°ç»„åŸæ¥çš„ä¸‹æ ‡çŠ¶æ€å°†ä¼šæ”¹å˜ã€‚å¦‚æœ m ä¸ºå¶æ•°ï¼Œ m+1 &lt; indexï¼Œé‚£ä¹ˆï¼Œnums[m] = nums[m+1]ï¼›m+1 &gt;=indexï¼Œé‚£ä¹ˆ nums[m] != nums[m+1]</p>\n<p>æ‰€ä»¥å¯çŸ¥ï¼Œ å¦‚æœ nums[m] === nums[m+1] åˆ™ target æ‰€åœ¨çš„åŒºé—´ä¸º [m+2,h]ï¼›å¦‚æœ nums[m] !=== nums[m+1] åˆ™ target æ‰€åœ¨åŒºé—´ä¸º [l,m]</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> singleNonDuplicate = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, h = nums.length - <span class=\"number\">1</span>, mid</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt; h) &#123;</span><br><span class=\"line\">    mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mid % <span class=\"number\">2</span> === <span class=\"number\">1</span>) mid -= <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[mid] === nums[mid + <span class=\"number\">1</span>]) l = mid + <span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> h = mid</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> nums[h]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬\"><a href=\"#ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬\" class=\"headerlink\" title=\"ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬\"></a>ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬</h1><blockquote>\n<p>LeetCode 278</p>\n<p>é¢˜ç›®æè¿°ï¼šæ‰¾åˆ°ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬ã€‚</p>\n<p>å¦‚æœç¬¬ mid ä¸ªç‰ˆæœ¬å‡ºé”™ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬æ‰€åœ¨åŒºé—´ä¸º [l,mid]ï¼Œæ­¤æ—¶ h=midï¼›å¦è®¤ç¬¬ä¸€ä¸ªé”™è¯¯åŒºé—´ä¸º [mid+1,h],æ­¤æ—¶ l=mid+1</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> solution = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">isBadVersion</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;integer&#125; n Total versions</span></span><br><span class=\"line\"><span class=\"comment\">     * @return &#123;integer&#125; The first bad version</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> l = <span class=\"number\">1</span>, h = n, mid</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l &lt; h) &#123;</span><br><span class=\"line\">            mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isBadVersion(mid)) h = mid</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> l</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—\"><a href=\"#æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—\" class=\"headerlink\" title=\"æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—\"></a>æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</h1><blockquote>\n<p>LeetCode 153</p>\n<p>Input: [3,4,5,1,2],<br>Output: 1</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> findMin = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, h = nums.length - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> mid</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt; h) &#123;</span><br><span class=\"line\">    mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[mid] &gt;= nums[h]) l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> h = mid</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> nums[l]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœç¬¬ mid ä¸ªæ•°å­—æ¯” nums[h]å°ï¼Œåˆ™æœ€å°æ•°å­—åœ¨  [l,mid] ä¹‹ä¸­ï¼Œ h=midï¼Œå¦åˆ™æœ€å°æ•°å­—åœ¨ [mid+1,h]ä¹‹ä¸­ã€‚</p>\n<h1 id=\"æŸ¥æ‰¾åŒºé—´\"><a href=\"#æŸ¥æ‰¾åŒºé—´\" class=\"headerlink\" title=\"æŸ¥æ‰¾åŒºé—´\"></a>æŸ¥æ‰¾åŒºé—´</h1><blockquote>\n<p>LeetCode 34</p>\n<p>Input: nums = [5,7,7,8,8,10], target = 8<br>Output: [3,4]<br>Input: nums = [5,7,7,8,8,10], target = 6<br>Output: [-1,-1]</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> searchRange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums, target</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> first = binarySearch(nums, target)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> last = binarySearch(nums, target + <span class=\"number\">1</span>) - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (nums[first] !== target) <span class=\"keyword\">return</span> [<span class=\"number\">-1</span>, <span class=\"number\">-1</span>]</span><br><span class=\"line\">  <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [first, <span class=\"built_in\">Math</span>.max(last, first)]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> binarySearch = <span class=\"function\">(<span class=\"params\">nums, target</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, h = nums.length</span><br><span class=\"line\">  <span class=\"keyword\">let</span> mid</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt; h) &#123;</span><br><span class=\"line\">    mid = <span class=\"built_in\">Math</span>.floor(l + (h - l) / <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[mid] &gt;= target) h = mid</span><br><span class=\"line\">    <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> l</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœè¦æŸ¥æ‰¾çš„å€¼æ¯”å½“å‰å€¼å°æˆ–è€…ç›¸ç­‰ï¼Œåˆ™è¦æŸ¥æ‰¾çš„å€¼çš„æœ€å·¦è¾¹åœ¨ [l,mid] æ­¤æ—¶ h = midï¼Œå¦åˆ™ï¼Œè¦æŸ¥æ‰¾çš„å€¼åœ¨ [mid+1,h]ã€‚</p>\n","categories":["algorithm"],"tags":["LeetCode"]},{"title":"è´ªå¿ƒæ€æƒ³","url":"https://xivier.github.io/2019/06/30/è´ªå¿ƒæ€æƒ³/","content":"<p>è´ªå¿ƒæ€æƒ³çš„åŸç†ï¼šä¿è¯æ¯æ¬¡æ“ä½œéƒ½æ˜¯å±€éƒ¨æœ€ä¼˜ï¼Œå¹¶ä¸”æœ€åçš„ç»“æœæ˜¯å…¨å±€æœ€ä¼˜çš„ã€‚</p>\n<h1 id=\"åˆ†é…é¥¼å¹²\"><a href=\"#åˆ†é…é¥¼å¹²\" class=\"headerlink\" title=\"åˆ†é…é¥¼å¹²\"></a>åˆ†é…é¥¼å¹²</h1><blockquote>\n<p>LeetCode 455</p>\n<p>Input: [1,2], [1,2,3]<br>Output: 2</p>\n<p>é¢˜ç›®æè¿°ï¼šæ¯ä¸ªå­©å­éƒ½æœ‰ä¸€ä¸ªæ»¡è¶³åº¦ï¼Œæ¯ä¸ªé¥¼å¹²éƒ½æœ‰ä¸€ä¸ªå¤§å°ï¼Œåªæœ‰é¥¼å¹²çš„å¤§å°å¤§äºç­‰äºå­©å­çš„æ»¡è¶³åº¦æ‰èƒ½æ»¡è¶³å­©å­ã€‚æ¯ä¸ªå­©å­åªèƒ½åˆ†é…ä¸€å—é¥¼å¹²ã€‚</p>\n</blockquote>\n<p>ç»™æ¯ä¸ªå­©å­çš„é¥¼å¹²åº”è¯¥å°½å¯èƒ½å°ï¼Œä½†æ˜¯åˆèƒ½æ»¡è¶³ä»–ã€‚è¿™æ ·æ»¡è¶³åº¦å¤§çš„é¥¼å¹²å°±èƒ½æ»¡è¶³æ»¡è¶³åº¦æ¯”è¾ƒå¤§çš„å­©å­ã€‚å°±å¯ä»¥ä¿è¯æ»¡è¶³æœ€å¤šçš„å­©å­ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> findContentChildren = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">g, s</span>) </span>&#123;</span><br><span class=\"line\">  g.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a - b)</span><br><span class=\"line\">  s.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a - b)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> gi = <span class=\"number\">0</span>, si = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (gi &lt; g.length &amp;&amp; si &lt; s.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s[si] &gt;= g[gi]) &#123;</span><br><span class=\"line\">      gi++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    si++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> gi</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ä¸é‡å çš„åŒºé—´ä¸ªæ•°\"><a href=\"#ä¸é‡å çš„åŒºé—´ä¸ªæ•°\" class=\"headerlink\" title=\"ä¸é‡å çš„åŒºé—´ä¸ªæ•°\"></a>ä¸é‡å çš„åŒºé—´ä¸ªæ•°</h1><blockquote>\n<p>LeetCode 435</p>\n<p>Input: [ [1,2], [1,2], [1,2] ]<br>Output: 2</p>\n<p>é¢˜ç›®æè¿°ï¼šè®¡ç®—ä¸€ç»„åŒºé—´è¦åšåˆ°ä¸é‡å ï¼Œéœ€è¦ç§»é™¤çš„åŒºé—´ä¸ªæ•°ã€‚è¦åšåˆ°ç§»é™¤çš„åŒºé—´ä¸ªæ•°æœ€å°ï¼Œå³è¦è®¡ç®—æœ€å¤šèƒ½ç»„æˆçš„ä¸é‡å åŒºé—´æ•°ã€‚ç„¶åç”¨æ€»åŒºé—´å‡å»ä¸é‡å çš„åŒºé—´æ•°ã€‚</p>\n</blockquote>\n<p>æ¯æ¬¡é€‰æ‹©ï¼ŒåŒºé—´ç»“å°¾å¦‚æœå°äºç­‰äºåŒºé—´å¼€å¤´ï¼Œåˆ™ä¸é‡å ã€‚åŒºé—´çš„ç»“å°¾è¶Šå°ï¼Œç•™ç»™åé¢çš„åŒºé—´çš„ç©ºé—´è¶Šå¤§ï¼Œå¯ä»¥é€‰æ‹©çš„åŒºé—´ä¸ªæ•°ä¹Ÿè¶Šå¤§ã€‚</p>\n<p>æ‰€ä»¥å¯¹åŒºé—´çš„ç»“å°¾è¿›è¡Œæ’åºï¼Œæ¯æ¬¡é€‰æ‹©ç»“å°¾æœ€å°ï¼Œå¹¶ä¸”å’Œå‰ä¸€ä¸ªä¸é‡å çš„åŒºé—´ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> eraseOverlapIntervals = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">intervals</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (intervals.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  intervals.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>])</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">1</span>, end = intervals[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; intervals.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (end &gt; intervals[i][<span class=\"number\">0</span>]) <span class=\"keyword\">continue</span></span><br><span class=\"line\">    end = intervals[i][<span class=\"number\">1</span>]</span><br><span class=\"line\">    res++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> intervals.length - res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸€å®šè¦è€ƒè™‘è¾¹ç•Œå€¼ã€‚å½“ä¼ å…¥ç©ºæ•°ç»„æ—¶ï¼Œè¿”å›0ã€‚</p>\n<h1 id=\"æŠ•é£é•–åˆºç ´æ°”çƒ\"><a href=\"#æŠ•é£é•–åˆºç ´æ°”çƒ\" class=\"headerlink\" title=\"æŠ•é£é•–åˆºç ´æ°”çƒ\"></a>æŠ•é£é•–åˆºç ´æ°”çƒ</h1><blockquote>\n<p>LeetCode 452</p>\n<p>Input:<br>[[10,16], [2,8], [1,6], [7,12]]<br>Output:<br>2</p>\n<p>é¢˜ç›®æè¿°ï¼šæ°”çƒåœ¨ä¸€ä¸ªæ°´å¹³æ•°è½´ä¸Šæ‘†æ”¾ï¼Œå¯ä»¥é‡å ï¼Œé£é•–å‚ç›´åæ ‡è½´æŠ•å‘ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ°”çƒéƒ½è¢«åˆºç ´ã€‚æ±‚è§£æœ€å°çš„æŠ•é£é•–æ¬¡æ•°ä½¿å¾—æ‰€æœ‰æ°”çƒéƒ½è¢«åˆºç ´ã€‚</p>\n</blockquote>\n<p>è®¡ç®—ä¸é‡å çš„åŒºé—´ä¸ªæ•°ï¼ŒåŒºåˆ«æ˜¯è¾¹ç•Œä¹Ÿæ˜¯é‡å åŒºé—´ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> findMinArrowShots = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">points</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (points.length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br><span class=\"line\">  points.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>])</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">1</span>, end = points[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; points.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (end &gt;= points[i][<span class=\"number\">0</span>]) <span class=\"keyword\">continue</span></span><br><span class=\"line\">    res++</span><br><span class=\"line\">    end = points[i][<span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"æ ¹æ®èº«é«˜å’Œåºå·é‡ç»„é˜Ÿåˆ—\"><a href=\"#æ ¹æ®èº«é«˜å’Œåºå·é‡ç»„é˜Ÿåˆ—\" class=\"headerlink\" title=\"æ ¹æ®èº«é«˜å’Œåºå·é‡ç»„é˜Ÿåˆ—\"></a>æ ¹æ®èº«é«˜å’Œåºå·é‡ç»„é˜Ÿåˆ—</h1><blockquote>\n<p>LeetCode 406</p>\n<p>Input:<br>[[7,0], [4,4], [7,1], [5,0], [6,1], [5,2]]<br>Output:<br>[[5,0], [7,0], [5,2], [6,1], [4,4], [7,1]]</p>\n<p>é¢˜ç›®æè¿°ï¼šæ¯ä¸ªå­¦ç”Ÿç”¨ä¸¤ä¸ªåˆ†é‡è¡¨ç¤ºï¼ˆh,kï¼‰,hè¡¨ç¤ºèº«é«˜ï¼Œkè¡¨ç¤ºå‰é¢æœ‰&gt;=kä¸ªå­¦ç”Ÿçš„èº«é«˜å’Œä»–ä¸€æ ·é«˜ã€‚</p>\n<p>å› ä¸ºåŒ…ä¿è¯å‰é¢æœ‰kä¸ªå­¦ç”Ÿçš„èº«é«˜å¤§äºç­‰äºä»–æœ¬èº«ã€‚æ‰€ä»¥å…ˆhé™åºæ’åˆ—ï¼Œkå‡åºæ’åˆ—ã€‚æ¯ä¸ªå­¦ç”Ÿéƒ½æ’å…¥åˆ°åº•kä¸ªä½ç½®ï¼Œä¿è¯å‰é¢æœ‰kä¸ªå­¦ç”Ÿèº«é«˜å¤§äºç­‰äºä»–ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> reconstructQueue = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">people</span>) </span>&#123;</span><br><span class=\"line\">  people.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] === b[<span class=\"number\">0</span>] ? a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>] : b[<span class=\"number\">0</span>] - a[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(people)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = []</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> people) &#123;</span><br><span class=\"line\">    res.splice(i[<span class=\"number\">1</span>], <span class=\"number\">0</span>, i)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ä¹°å–è‚¡ç¥¨æœ€å¤§çš„æ”¶ç›Š-I\"><a href=\"#ä¹°å–è‚¡ç¥¨æœ€å¤§çš„æ”¶ç›Š-I\" class=\"headerlink\" title=\"ä¹°å–è‚¡ç¥¨æœ€å¤§çš„æ”¶ç›Š I\"></a>ä¹°å–è‚¡ç¥¨æœ€å¤§çš„æ”¶ç›Š I</h1><blockquote>\n<p>LeetCode 121</p>\n<p>é¢˜ç›®æè¿°ï¼šåªè¿›è¡Œä¸€æ¬¡è‚¡ç¥¨äº¤æ˜“ï¼Œä¹°å…¥å–å‡ºæ±‚æœ€å¤§åˆ©ç›Šã€‚</p>\n</blockquote>\n<p>è®°å½•å‰é¢çš„æœ€å°ä»·æ ¼ï¼Œç„¶åå°†æ•´ä¸ªæœ€å°ä»·æ ¼ä½œä¸ºä¹°å…¥ä»·æ ¼ã€‚å°†å½“å‰ä»·æ ¼ä½œä¸ºå”®å‡ºä»·æ ¼ï¼ŒæŸ¥çœ‹å½“å‰æ”¶ç›Šæ˜¯ä¸æ˜¯æœ€å¤§æ”¶ç›Šã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> maxProfit = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">prices</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> minPrice = prices[<span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; prices.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> rase = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (prices[i] &lt; minPrice) minPrice = prices[i]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (prices[i] &gt; minPrice) rase = prices[i] - minPrice</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (rase &gt; res) res = rase</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ä¹°å–è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š-II\"><a href=\"#ä¹°å–è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š-II\" class=\"headerlink\" title=\"ä¹°å–è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š II\"></a>ä¹°å–è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š II</h1><blockquote>\n<p>LeetCode 122</p>\n<p>é¢˜ç›®æè¿°ï¼šå¯ä»¥è¿›è¡Œå¤šæ¬¡äº¤æ˜“ï¼Œä½†æ˜¯äº¤æ˜“ä¸èƒ½äº¤å‰ã€‚å³ä¹°å…¥è‚¡ç¥¨ï¼Œå–äº†ä¹‹åæ‰ä¹°å†ä¹°ã€‚æ±‚æœ€å¤§åˆ©ç›Š</p>\n</blockquote>\n<p>åªè¦å½“å‰çš„é‡‘é¢å¤§äºå‰ä¸€é¡¹çš„é‡‘é¢ï¼Œå³å¯çœ‹åšè·å¾—æ”¶ç›Šã€‚å³æ¯æ¬¡åˆ°å½“å‰é‡‘é¢æ—¶ä¿è¯ä¹‹å‰çš„åˆ©æ¶¦éƒ½æ˜¯æœ€å¤§çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> maxProfit = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">prices</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; prices.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (prices[i] &gt; prices[i - <span class=\"number\">1</span>]) res += prices[i] - prices[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ç§æ¤èŠ±æœµ\"><a href=\"#ç§æ¤èŠ±æœµ\" class=\"headerlink\" title=\"ç§æ¤èŠ±æœµ\"></a>ç§æ¤èŠ±æœµ</h1><blockquote>\n<p>LeetCode 605</p>\n<p>Input: flowerbed = [1,0,0,0,1], n = 1<br>Output: True</p>\n<p>é¢˜ç›®æè¿°ï¼š1 è¡¨ç¤ºç§æ¤äº†èŠ±æœµï¼Œ0 è¡¨ç¤ºæ²¡æœ‰ç§æ¤èŠ±æœµã€‚èŠ±æœµä¹‹é—´è‡³å°‘é—´éš”ä¸€ä¸ªå•ä½çš„é—´éš™ã€‚æ±‚è§£æ˜¯å¦èƒ½ç§ä¸‹ n æœµèŠ±</p>\n</blockquote>\n<p>éœ€è¦è€ƒè™‘è¾¹ç•Œï¼Œåœ¨ç¬¬ä¸€ä¸ªå’Œæœ€åä¸ªä½ç½®æ—¶è€ƒè™‘å·¦è¾¹å’Œå³è¾¹å¯ä»¥çœ‹åš 0 ï¼Œæ²¡æœ‰ç§æ¤èŠ±æœµã€‚å…¶ä»–ä½ç½®æ—¶ï¼Œçœ‹å·¦å³æ˜¯å¦ç§æ¤èŠ±æœµï¼Œå¦‚æœéƒ½ä¸º0ï¼Œåˆ™å½“å‰ä½ç½®å¯ä»¥è®¾ç½®1ï¼Œç„¶åè®¡æ•°å™¨+1ï¼Œæœ€åçœ‹è®¡æ•°å™¨çš„å¤§å°æ˜¯å¦å¤§äºç­‰äºnã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> canPlaceFlowers = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">flowerbed, n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; flowerbed.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (flowerbed[i] === <span class=\"number\">1</span>) <span class=\"keyword\">continue</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> pre = i === <span class=\"number\">0</span> ? <span class=\"number\">0</span> : flowerbed[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">let</span> next = i === flowerbed.length - <span class=\"number\">1</span> ? <span class=\"number\">0</span> : flowerbed[i + <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pre === <span class=\"number\">0</span> &amp;&amp; next === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      flowerbed[i] = <span class=\"number\">1</span></span><br><span class=\"line\">      res++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(flowerbed)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res &gt;= n</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ—\"><a href=\"#åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ—\" class=\"headerlink\" title=\"åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ—\"></a>åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ—</h1><blockquote>\n<p>LeetCode 392</p>\n<p>s = â€œabcâ€, t = â€œahbgdcâ€<br>Return true.</p>\n</blockquote>\n<p>éå†éœ€è¦åˆ¤æ–­å­åºåˆ—çš„åºåˆ—ï¼Œå¯¹äºå­åºåˆ—çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨å¯¹ç…§åºåˆ—ä¸­ä¾æ¬¡ä»å·¦è‡³å³éå†ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå­åºåˆ—æŒ‡å‘ä¸‹ä¸€ä½ï¼Œç„¶åå¯¹ç…§åºåˆ—æ¥ç€éå†ï¼Œé‡å¤æ­¤æ­¥éª¤ã€‚å¦‚æœå¯¹ç…§åºåˆ—éå†å®Œæˆåï¼Œå­åºåˆ—ä¹Ÿéå†å®Œæˆäº†ï¼Œè¯´æ˜æ˜¯å­åºåˆ—ï¼Œå¦åˆ™ä¸æ˜¯ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> isSubsequence = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s, t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> s0 = <span class=\"number\">0</span>, t0 = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (t0 &lt; t.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s[s0] === t[t0]) &#123;</span><br><span class=\"line\">      s0++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    t0++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> s0 === s.length</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ä¿®æ”¹ä¸€ä¸ªæ•°å˜æˆéé€’å‡æ•°ç»„\"><a href=\"#ä¿®æ”¹ä¸€ä¸ªæ•°å˜æˆéé€’å‡æ•°ç»„\" class=\"headerlink\" title=\"ä¿®æ”¹ä¸€ä¸ªæ•°å˜æˆéé€’å‡æ•°ç»„\"></a>ä¿®æ”¹ä¸€ä¸ªæ•°å˜æˆéé€’å‡æ•°ç»„</h1><blockquote>\n<p>LeetCode 665</p>\n<p>Input: [4,2,3]<br>Output: True</p>\n<p>é¢˜ç›®æè¿°ï¼šåˆ¤æ–­ä¸€ä¸ªæ•°ç»„èƒ½å¦åªä¿®æ”¹ä¸€ä¸ªæ•°ï¼Œä½¿ä¹‹å˜æˆéé€’å‡æ•°ç»„ã€‚</p>\n</blockquote>\n<p>å½“ nums[i] &lt; nums[i-1] æ—¶ï¼Œéœ€è¦æ€è€ƒï¼Œä¿®æ”¹å“ªä¸€ä¸ªæ•°ã€‚ç†è®ºä¸Šä¸¤ä¸ªéƒ½å¯ä»¥ä¿®æ”¹ã€‚nums[i] = nums[i-1] or nums[i-1]  = nums[i] éƒ½å¯ä»¥ã€‚å¦‚æœä¿®æ”¹å½“å‰æ•°çš„è¯ï¼Œä¼šä½¿ä¹‹å˜å¤§ï¼Œå½±å“ååºçš„åˆ¤æ–­ã€‚æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¿®æ”¹å‰ä¸€ä¸ªæ•°ã€‚</p>\n<p><strong>ç‰¹æ®Šæƒ…å†µï¼š</strong>å½“å‰çš„æ•°æ¯” nums[i-2] è¿˜è¦å°ï¼Œç”±äºä¹‹å‰çš„æ•°å·²ç»æ’åºå¥½äº†ï¼Œæ­¤æ—¶å†æ”¹å˜ nums[i-1] ä¼šä½¿å¾— nums[i-1] å˜å°ï¼Œæ‰€ä»¥æ­¤æ—¶ nums[i] = nums[i-1]</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> checkPossibility = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; nums.length &amp;&amp; res &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i] &gt;= nums[i - <span class=\"number\">1</span>]) <span class=\"keyword\">continue</span></span><br><span class=\"line\">    res++</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= <span class=\"number\">2</span> &amp;&amp; nums[i] &lt; nums[i - <span class=\"number\">2</span>]) nums[i] = nums[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span> nums[i - <span class=\"number\">1</span>] = nums[i]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res &lt;= <span class=\"number\">1</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"å­æ•°ç»„æœ€å¤§çš„å’Œ\"><a href=\"#å­æ•°ç»„æœ€å¤§çš„å’Œ\" class=\"headerlink\" title=\"å­æ•°ç»„æœ€å¤§çš„å’Œ\"></a>å­æ•°ç»„æœ€å¤§çš„å’Œ</h1><blockquote>\n<p>LeetCode 53</p>\n<p>For example, given the array [-2,1,-3,4,-1,2,1,-5,4],<br>the contiguous subarray [4,-1,2,1] has the largest sum = 6.</p>\n</blockquote>\n<p>å½“éå†åˆ°å½“å‰æ•°æ—¶ï¼Œä¿è¯ä¹‹å‰çš„æœ€å¤§å’Œæ˜¯æœ€å¤§çš„ã€‚</p>\n<p>è¦ä¿è¯è¿ç»­æ•°ç»„çš„æœ€å¤§å’Œï¼Œæ‰€ä»¥è´Ÿæ•°è¿ç»­è‚¯å®šä¼šä½¿æœ€åçš„å€¼å˜å°ã€‚</p>\n<p>æ‰€ä»¥å½“ä¹‹å‰çš„è¿ç»­å’Œä¸ºè´Ÿæ•°æ—¶ï¼Œå½“é‡åˆ°å½“å‰å€¼æ—¶ï¼Œä¸¢å¼ƒæ‰ä¹‹å‰çš„å’Œï¼Œä»å½“å‰å€¼å¼€å§‹è®¡ç®—ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> maxSubArray = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> preSum = nums[<span class=\"number\">0</span>], maxSum = preSum</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class=\"line\">    preSum = preSum &gt; <span class=\"number\">0</span> ? preSum + nums[i] : nums[i]</span><br><span class=\"line\">    maxSum = <span class=\"built_in\">Math</span>.max(maxSum, preSum)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> maxSum</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"åˆ†éš”å­—ç¬¦ä¸²ä½¿åŒç§å­—ç¬¦å‡ºç°åœ¨ä¸€èµ·\"><a href=\"#åˆ†éš”å­—ç¬¦ä¸²ä½¿åŒç§å­—ç¬¦å‡ºç°åœ¨ä¸€èµ·\" class=\"headerlink\" title=\"åˆ†éš”å­—ç¬¦ä¸²ä½¿åŒç§å­—ç¬¦å‡ºç°åœ¨ä¸€èµ·\"></a>åˆ†éš”å­—ç¬¦ä¸²ä½¿åŒç§å­—ç¬¦å‡ºç°åœ¨ä¸€èµ·</h1><blockquote>\n<p>LeetCode 763</p>\n<p>Input: S = â€œababcbacadefegdehijhklijâ€<br>Output: [9,7,8]</p>\n<p>é¢˜ç›®è¦æ±‚ï¼šè¦æ±‚åˆ†å‰²çš„æ•°ç»„å¤§å°æœ€å¤§ã€‚</p>\n</blockquote>\n<p>ä»å·¦è‡³å³éå†å­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸ªå­—ç¬¦ï¼Œæ‰¾åˆ°å®ƒæœ€åå‡ºç°çš„ä½ç½®ã€‚ç„¶åå¯¹è¿™ä¸ªåŒºé—´è¿›è¡Œéå†ï¼Œçœ‹å®ƒæœ€åå‡ºç°çš„ä½ç½®æ˜¯å¦å¤§äºä¹‹å‰çš„å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœå¤§äºåˆ™æ‰©å±•è¿™ä¸ªåŒºé—´ã€‚éå†å®Œæˆåï¼ŒåŒä¸€ä¸ªå­—æ¯éƒ½å€¼å‡ºç°åœ¨è¿™ä¸ªåŒºé—´å†…ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> partitionLabels = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">S</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = []</span><br><span class=\"line\">  <span class=\"keyword\">let</span> firstIndex = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (firstIndex &lt; S.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> lastIndex = firstIndex</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = firstIndex; i &lt; S.length &amp;&amp; i &lt;= lastIndex; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> index = S.lastIndexOf(S[i])</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (index &gt; lastIndex) &#123;</span><br><span class=\"line\">        lastIndex = index</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.push(lastIndex - firstIndex + <span class=\"number\">1</span>)</span><br><span class=\"line\">    firstIndex = lastIndex + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["algorithm"],"tags":["LeetCode"]},{"title":"æ’åº","url":"https://xivier.github.io/2019/06/29/æ’åº/","content":"<h1 id=\"å¿«é€Ÿé€‰æ‹©\"><a href=\"#å¿«é€Ÿé€‰æ‹©\" class=\"headerlink\" title=\"å¿«é€Ÿé€‰æ‹©\"></a>å¿«é€Ÿé€‰æ‹©</h1><p>åˆ©ç”¨äº†å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼Œæ±‚è§£ç¬¬ K ä¸ªå…ƒç´ çš„é—®é¢˜ã€‚åˆ©ç”¨çš„æ˜¯å¿«é€Ÿæ’åºçš„åˆ’åˆ†æ€æƒ³ partition() è¿›è¡Œå®ç°çš„ã€‚éœ€è¦å…ˆæ‰“ä¹±æ•°ç»„ï¼Œä¸ç„¶æœ€åçš„æƒ…å†µå¤æ‚åº¦ä¸º O(N^2)ã€‚</p>\n<p>å¿«é€Ÿæ’åºçš„æ¯æ¬¡ partition() è¿‡ç¨‹ä¸­éƒ½æ’å¥½ä¸€ä¸ªä½ç½®ã€‚å¦‚æœæ’å¥½çš„æ˜¯æ­£æ•°ç¬¬Kä¸ªä½ç½®ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç¬¬Kå°çš„å…ƒç´ ã€‚</p>\n<h1 id=\"å †\"><a href=\"#å †\" class=\"headerlink\" title=\"å †\"></a>å †</h1><p>é¢„å¤‡çŸ¥è¯†ï¼š</p>\n<ul>\n<li>å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘</li>\n<li>å®Œå…¨äºŒå‰æ ‘ï¼šé™¤å¼€æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ï¼Œæœ€åä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨å·¦è¾¹ã€‚</li>\n<li>å¤§æ ¹å †ï¼šæ ¹èŠ‚ç‚¹ä¸ºæœ€å¤§å€¼ï¼Œæ¯ä¸ªç»“ç‚¹çš„å€¼å¤§äºç­‰äºå­©å­ç»“ç‚¹çš„å€¼ã€‚</li>\n<li>å°æ ¹å †ï¼šæ ¹èŠ‚ç‚¹çš„å€¼ä¸ºæœ€å°å€¼ï¼Œæ¯ä¸ªæ ¹èŠ‚ç‚¹çš„å€¼éƒ½å°äºç­‰äºå­©å­ç»“ç‚¹çš„å€¼ã€‚</li>\n<li>å †çš„å­˜å‚¨ï¼šç”¨æ•°ç»„æ¥å­˜å‚¨ã€‚</li>\n<li>å¯¹äºèŠ‚ç‚¹iï¼Œå­èŠ‚ç‚¹ä¸º2i+1 ä¸ 2i+2</li>\n<li>å †æ’åºç®—æ³•ï¼ˆä»¥å¤§æ ¹å †ï¼ˆheapifyï¼‰ä¸ºä¾‹ï¼‰ï¼š<ol>\n<li>å¯¹æ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œä»ä¸‹è‡³ä¸Šï¼Œä»å³è‡³å·¦ï¼Œåš shiftDown ä¸‹æ²‰æ“ä½œã€‚æ“ä½œåæ ¹èŠ‚ç‚¹ä¸ºæœ€å¤§å€¼ï¼Œå°†å…¶ä¸æœ€åä¸€ä¸ªç»“ç‚¹äº¤æ¢ã€‚</li>\n<li>é™¤å¼€æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä½™èŠ‚ç‚¹ç»§ç»­è½¬åŒ–æˆå¤§æ ¹å †ï¼Œæ­¤æ—¶æ ¹èŠ‚ç‚¹ä¸ºæ¬¡æœ€å¤§ï¼Œå°†å…¶ä¸æœ€åä¸€ä¸ªç»“ç‚¹äº¤æ¢ã€‚</li>\n<li>é‡å¤2ï¼Œç›´åˆ°å †ä¸­å…ƒç´ ä¸ªæ•°ä¸º1ï¼Œæ’åºå®Œæˆã€‚</li>\n</ol>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> swap = <span class=\"function\">(<span class=\"params\">arr, i, j</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  [arr[i], arr[j]] = [arr[j], arr[i]]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> shiftDowm = <span class=\"function\">(<span class=\"params\">arr, i, length</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">2</span> * i + <span class=\"number\">1</span>; j &lt; length; j = j * <span class=\"number\">2</span> + <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> temp = arr[i]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j + <span class=\"number\">1</span> &lt; length &amp;&amp; arr[j + <span class=\"number\">1</span>] &gt; arr[j]) &#123;</span><br><span class=\"line\">      j++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr[j] &gt; temp) &#123;</span><br><span class=\"line\">      swap(arr, i, j)</span><br><span class=\"line\">      i = j</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> heapSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"built_in\">Math</span>.floor(arr.length / <span class=\"number\">2</span> - <span class=\"number\">1</span>); i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    shiftDowm(arr, i, arr.length)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = arr.length - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    swap(arr, <span class=\"number\">0</span>, i)</span><br><span class=\"line\">    shiftDowm(arr, <span class=\"number\">0</span>, i)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç”¨äºæ±‚è§£ç¬¬ K ä¸ªæœ€å°å…ƒç´ é—®é¢˜ã€‚å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸ºKçš„å¤§æ ¹å †ã€‚å¤§æ ¹å †çš„å †é¡¶å…ƒç´ å³ä¸ºè¯¥å †çš„æœ€å¤§å€¼ã€‚æ¯æ¬¡éå†æ–°å…ƒç´ æ—¶ï¼Œå¦‚æœæ¯”å †é¡¶å…ƒç´ å°ï¼Œåˆ™æŠŠå †é¡¶å…ƒç´ å»é™¤ï¼Œå°†æ–°å…ƒç´ åŠ åˆ°å †ä¸­ï¼Œè°ƒæ•´å †ã€‚éå†å®Œä¹‹åï¼Œå †é‡Œé¢çš„Kä¸ªå…ƒç´ æ˜¯ä»å°åˆ°å¤§æ’åˆ—çš„ï¼Œå †é¡¶å³ä¸ºç¬¬Kä¸ªæœ€å°å…ƒç´ ã€‚</p>\n<p>ä¹Ÿå¯ä»¥ç”¨äºæ±‚è§£ç¬¬Kä¸ªæœ€å¤§å…ƒç´ çš„é—®é¢˜ã€‚ç»´æŠ¤ä¸€ä¸ªKå¤§å°çš„å°æ ¹å †ã€‚</p>\n<h2 id=\"JS-å®ç°å †æ’åº\"><a href=\"#JS-å®ç°å †æ’åº\" class=\"headerlink\" title=\"JS å®ç°å †æ’åº\"></a>JS å®ç°å †æ’åº</h2><h1 id=\"Kth-Element\"><a href=\"#Kth-Element\" class=\"headerlink\" title=\"Kth Element\"></a>Kth Element</h1><blockquote>\n<p>LeetCode 215</p>\n<p>Input: [3,2,1,5,6,4] and k = 2<br>Output: 5</p>\n<p>é¢˜ç›®æè¿°ï¼šæ‰¾å‡ºå€’æ•°ç¬¬Kå¤§çš„å…ƒç´ </p>\n</blockquote>\n<h2 id=\"æ’åº\"><a href=\"#æ’åº\" class=\"headerlink\" title=\"æ’åº\"></a>æ’åº</h2><blockquote>\n<p>æ—¶é—´å¤æ‚åº¦ O(NlogN),ç©ºé—´å¤æ‚åº¦ O(1)</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> findKthLargest = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums, k</span>) </span>&#123;</span><br><span class=\"line\">    nums.sort();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> nums[nums.length-k]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>å…ˆç”¨è‡ªå¸¦çš„æ’åºæ–¹æ³•è¿›è¡Œæ’åºï¼Œç„¶åå†å–å€’æ•°ç¬¬kä¸ªå…ƒç´ </p>\n<h2 id=\"å †-1\"><a href=\"#å †-1\" class=\"headerlink\" title=\"å †\"></a>å †</h2><blockquote>\n<p>æ—¶é—´å¤æ‚åº¦ O(NlogK)ï¼Œç©ºé—´å¤æ‚åº¦ O(K)ã€‚</p>\n</blockquote>\n<h2 id=\"å¿«é€Ÿæ’åº\"><a href=\"#å¿«é€Ÿæ’åº\" class=\"headerlink\" title=\"å¿«é€Ÿæ’åº\"></a>å¿«é€Ÿæ’åº</h2><blockquote>\n<p>æ—¶é—´å¤æ‚åº¦ O(N)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> findKthLargest = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums, k</span>) </span>&#123;</span><br><span class=\"line\">  k = nums.length - k</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = <span class=\"number\">0</span>, r = nums.length - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (l &lt; r) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> res = partition(nums, l, r)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (res === k) <span class=\"keyword\">break</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (res &gt; k) r = res - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> l = res + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> nums[k]</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> partition = <span class=\"function\">(<span class=\"params\">nums, i, j</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> l = i, r = j + <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (l &lt; j &amp;&amp; nums[++l] &lt; nums[i]);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (r &gt; i &amp;&amp; nums[--r] &gt; nums[i]);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    [nums[l], nums[r]] = [nums[r], nums[l]]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  [nums[i], nums[r]] = [nums[r], nums[i]]</span><br><span class=\"line\">  <span class=\"keyword\">return</span> r</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡æ¯æ¬¡åˆ’åˆ†ï¼Œæ‰¾å‡ºå€’æ•°ç¬¬kä¸ªå…ƒç´ å°±è¡Œã€‚</p>\n<h1 id=\"å‡ºç°é¢‘ç‡æœ€å¤šçš„-k-ä¸ªå…ƒç´ \"><a href=\"#å‡ºç°é¢‘ç‡æœ€å¤šçš„-k-ä¸ªå…ƒç´ \" class=\"headerlink\" title=\"å‡ºç°é¢‘ç‡æœ€å¤šçš„ k ä¸ªå…ƒç´ \"></a>å‡ºç°é¢‘ç‡æœ€å¤šçš„ k ä¸ªå…ƒç´ </h1><blockquote>\n<p>LeetCode 347</p>\n<p>Given [1,1,1,2,2,3] and k = 2, return [1,2].</p>\n</blockquote>\n<p>è®¾ç½®è‹¥å¹²ä¸ªæ¡¶ï¼Œæ¡¶çš„ä¸‹æ ‡è¡¨ç¤ºå‡ºç°çš„é¢‘ç‡ï¼Œå³ç¬¬ i ä¸ªæ¡¶é‡Œå­˜å‚¨çš„æ•°å‡ºç°çš„é¢‘ç‡ä¸º iã€‚éƒ½å­˜åˆ°æ¡¶é‡Œä¹‹åï¼Œæ ¹æ®æ¡¶çš„é¢‘ç‡è¿›è¡Œæ’åºï¼Œä»åå¾€å‰éå†ï¼Œæœ€å…ˆå¾—åˆ°çš„kä¸ªå…ƒç´ å³ä¸ºå‡ºç°é¢‘ç‡æœ€å¤šçš„kä¸ªå…ƒç´ ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> topKFrequent = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums, k</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> map = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (i <span class=\"keyword\">of</span> nums) &#123;</span><br><span class=\"line\">    map.set(i, map.get(i) + <span class=\"number\">1</span> || <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortedArray = [...map.entries()].sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> b[<span class=\"number\">1</span>] - a[<span class=\"number\">1</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = []</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; k; i++) &#123;</span><br><span class=\"line\">    res.push(sortedArray[i][<span class=\"number\">0</span>])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"æŒ‰ç…§å­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº\"><a href=\"#æŒ‰ç…§å­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº\" class=\"headerlink\" title=\"æŒ‰ç…§å­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº\"></a>æŒ‰ç…§å­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº</h1><blockquote>\n<p>LeetCode 451</p>\n<p>Input:<br>â€œtreeâ€<br>Output:<br>â€œeertâ€</p>\n</blockquote>\n<p>åŒä¸Šé¢˜ï¼Œå…ˆç”¨æ¡¶å­˜æ‰€æœ‰å­—ç¬¦ï¼ŒæŒ‰ç…§å­—ç¬¦çš„é¢‘ç‡è¿›è¡Œæ’åºï¼Œä»æœ€å¤šé¢‘ç‡å¾€æœ€å°‘é¢‘ç‡è¿›è¡Œæ‰“å°å³å¯ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> frequencySort = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> map = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> s) &#123;</span><br><span class=\"line\">    map.set(i, map.get(i) + <span class=\"number\">1</span> || <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">  [...map.entries()].sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> b[<span class=\"number\">1</span>] - a[<span class=\"number\">1</span>]).forEach(<span class=\"function\"><span class=\"params\">cur</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; cur[<span class=\"number\">1</span>]; i++) &#123;</span><br><span class=\"line\">      res.push(cur[<span class=\"number\">0</span>])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.join(<span class=\"string\">''</span>)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"è·å…°å›½æ——é—®é¢˜\"><a href=\"#è·å…°å›½æ——é—®é¢˜\" class=\"headerlink\" title=\"è·å…°å›½æ——é—®é¢˜\"></a>è·å…°å›½æ——é—®é¢˜</h1><blockquote>\n<p>LeetCode 75 </p>\n<p>Input: [2,0,2,1,1,0]<br>Output: [0,0,1,1,2,2]</p>\n<p>é¢˜ç›®æè¿°ï¼šæŒ‰ç…§ 0 1 2 é¡ºåºè¿›è¡Œæ’åºï¼Œä¸èƒ½ä½¿ç”¨åŸå§‹çš„æ’åº</p>\n</blockquote>\n<p>è¿ç”¨åˆ’åˆ†çš„æ€æƒ³ï¼Œç­‰äºé›¶çš„æ”¾å·¦è¾¹ï¼Œç­‰äºäºŒçš„åˆ’åˆ†åˆ°å³è¾¹ï¼Œæœ€åä¸­é—´å°±æ˜¯ç­‰äº1çš„äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> sortColors = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> zero = <span class=\"number\">-1</span>, one = <span class=\"number\">0</span>, two = nums.length</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (one &lt; two) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[one] === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      zero++</span><br><span class=\"line\">      [nums[zero], nums[one]] = [nums[one], nums[zero]]</span><br><span class=\"line\">      one++</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (nums[one] === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">      two--</span><br><span class=\"line\">      [nums[two], nums[one]] = [nums[one], nums[two]]</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      one++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> nums</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["algorithm"],"tags":["LeetCode"]},{"title":"åŒæŒ‡é’ˆ","url":"https://xivier.github.io/2019/06/28/åŒæŒ‡é’ˆ/","content":"<h1 id=\"1-æœ‰åºæ•°ç»„çš„-Two-Sum\"><a href=\"#1-æœ‰åºæ•°ç»„çš„-Two-Sum\" class=\"headerlink\" title=\"1. æœ‰åºæ•°ç»„çš„ Two Sum\"></a>1. æœ‰åºæ•°ç»„çš„ Two Sum</h1><p>LeetCode 167</p>\n<p>Input: numbers æœ‰åºæ•°ç»„,target éœ€è¦æ±‚å’Œçš„å€¼<br>Output: index1,index2  ä¸¤ä¸ªå€¼çš„ä¸‹æ ‡ï¼Œæ³¨æ„ä»1å¼€å§‹</p>\n<p>é¢˜ç›®æè¿°ï¼šåœ¨æœ‰åºæ•°ç»„ä¸­å¯»æ‰¾ä¸¤ä¸ªæ•°ï¼Œä½¿ä¹‹å’Œä¸º target</p>\n<p>ä½¿ç”¨åŒæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¾ƒå°çš„å…ƒç´ ï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¾ƒå¤§çš„å…ƒç´ ã€‚å°æŒ‡é’ˆä»å¤´å¼€å§‹å¾€åéå†ï¼Œå¤§æŒ‡é’ˆä»å°¾å¼€å§‹å¾€å‰éå†ã€‚</p>\n<ul>\n<li>å¦‚æœä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ å’Œä¸º target åˆ™å¾—åˆ°äº†è¦æ±‚çš„ç»“æœ</li>\n<li>å¦‚æœ sum &gt; target è¯´æ˜ç»“æœå¤§äº†ï¼Œå¤§æŒ‡é’ˆéœ€è¦å‰ç§»</li>\n<li>å¦‚æœ sum &lt; target è¯´æ˜ç»“æœå°äº†ï¼Œå°æŒ‡é’ˆéœ€è¦åç§»</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;number[]&#125; numbers</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;number&#125; target</span></span><br><span class=\"line\"><span class=\"comment\"> * @return &#123;number[]&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> twoSum = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">numbers, target</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = <span class=\"number\">0</span>, p2 = numbers.length - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (p1 &lt; p2) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (numbers[p1] + numbers[p2] === target) <span class=\"keyword\">return</span> [p1 + <span class=\"number\">1</span>, p2 + <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (numbers[p1] + numbers[p2] &lt; target) p1++</span><br><span class=\"line\">    <span class=\"keyword\">else</span> p2--</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-ä¸¤æ•°å¹³æ–¹å’Œ\"><a href=\"#2-ä¸¤æ•°å¹³æ–¹å’Œ\" class=\"headerlink\" title=\"2. ä¸¤æ•°å¹³æ–¹å’Œ\"></a>2. ä¸¤æ•°å¹³æ–¹å’Œ</h1><p>LeetCode 633</p>\n<p>Input: 5<br>Output: True</p>\n<p>é¢˜ç›®æè¿°ï¼šåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯ä¸¤ä¸ªæ•°çš„å¹³æ–¹å’Œ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> judgeSquareSum = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">c</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = <span class=\"number\">0</span>, p2 = <span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.sqrt(c))</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (p1 &lt;= p2) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p1 * p1 + p2 * p2 === c) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p1 * p1 + p2 * p2 &gt; c) p2--</span><br><span class=\"line\">    <span class=\"keyword\">else</span> p1++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯\"><a href=\"#3-åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯\" class=\"headerlink\" title=\"3. åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯\"></a>3. åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯</h1><p>LeetCode 345</p>\n<p>Input: â€œLeetCodeâ€<br>Output: â€œLeoCedeâ€</p>\n<p>è§£é¢˜æ€è·¯ï¼šä½¿ç”¨åŒæŒ‡é’ˆæŒ‡å‘å¾…åè½¬çš„ä¸¤ä¸ªå…ƒéŸ³å­—æ¯ï¼Œä¸€ä¸ªæŒ‡é’ˆä»å¤´éå†ï¼Œä¸€ä¸ªæŒ‡é’ˆä»å°¾éå†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> reverseVowels = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> VOWELS = &#123; <span class=\"string\">'a'</span>: <span class=\"number\">1</span>, <span class=\"string\">'e'</span>: <span class=\"number\">1</span>, <span class=\"string\">'i'</span>: <span class=\"number\">1</span>, <span class=\"string\">'o'</span>: <span class=\"number\">1</span>, <span class=\"string\">'u'</span>: <span class=\"number\">1</span>, <span class=\"string\">'A'</span>: <span class=\"number\">1</span>, <span class=\"string\">'E'</span>: <span class=\"number\">1</span>, <span class=\"string\">'I'</span>: <span class=\"number\">1</span>, <span class=\"string\">'O'</span>: <span class=\"number\">1</span>, <span class=\"string\">'U'</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> arr = s.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = arr.length - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i &lt; j) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (VOWELS[arr[i]] &amp;&amp; VOWELS[arr[j]]) &#123;</span><br><span class=\"line\">      [arr[i], arr[j]] = [arr[j], arr[i]]</span><br><span class=\"line\">      i++</span><br><span class=\"line\">      j--</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (VOWELS[arr[i]]) j--</span><br><span class=\"line\">    <span class=\"keyword\">else</span> i++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr.join(<span class=\"string\">''</span>)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-å›æ–‡å­—ç¬¦ä¸²\"><a href=\"#4-å›æ–‡å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"4. å›æ–‡å­—ç¬¦ä¸²\"></a>4. å›æ–‡å­—ç¬¦ä¸²</h1><p>LeetCode 680</p>\n<p>Input: â€œabcaâ€<br>Output: true</p>\n<p>é¢˜ç›®æè¿°ï¼šå¯ä»¥åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥æ„æˆå›æ–‡ä¸²</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> validPalindrome = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = s.length<span class=\"number\">-1</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i &lt; j) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s[i] !== s[j]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> judge(s, i + <span class=\"number\">1</span>, j) || judge(s, i, j - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      i++</span><br><span class=\"line\">      j--</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> judge = <span class=\"function\">(<span class=\"params\">s, i, j</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i &lt; j) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s[i] !== s[j]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    i++</span><br><span class=\"line\">    j--</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"5-å½’å¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\"><a href=\"#5-å½’å¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\" class=\"headerlink\" title=\"5. å½’å¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\"></a>5. å½’å¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h1><p>LeetCode 88</p>\n<p>Input:<br>nums1 = [1,2,3,0,0,0], m = 3<br>nums2 = [4,5,6], n = 3</p>\n<p>Output:<br>[1,2,3,4,5,6]</p>\n<p>é¢˜ç›®æè¿°ï¼šæŠŠç»“æœå½’å¹¶åœ¨ç¬¬ä¸€ä¸ªæ•°ç»„ä¸Š</p>\n<p>éœ€è¦ä»å°¾éƒ¨å¼€å§‹éå†ï¼Œä¸ç„¶ç»“æœä¼šè¦†ç›–æœªè¿›è¡Œå½’å¹¶çš„å€¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> merge = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = m - <span class=\"number\">1</span>, p2 = n - <span class=\"number\">1</span>, mergeIndex = m + n - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (p1 &gt;= <span class=\"number\">0</span> || p2 &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p1 &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      nums1[mergeIndex--] = nums2[p2--]</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p2 &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      nums1[mergeIndex--] = nums1[p1--]</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (nums2[p2] &gt;= nums1[p1]) &#123;</span><br><span class=\"line\">      nums1[mergeIndex--] = nums2[p2--]</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      nums1[mergeIndex--] = nums1[p1--]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"6-åˆ¤æ–­é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯\"><a href=\"#6-åˆ¤æ–­é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯\" class=\"headerlink\" title=\"6. åˆ¤æ–­é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯\"></a>6. åˆ¤æ–­é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯</h1><p>LeetCode 141</p>\n<p>ä½¿ç”¨åŒæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆä¸€æ¬¡ç§»åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸€æ¬¡ç§»åŠ¨ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœå­˜åœ¨ç¯ï¼Œåˆ™ä¸¤ä¸ªæŒ‡é’ˆä¸€å®šä¼šç›¸é‡ã€‚<br>PS: èµ·å§‹æ—¶ä¸èƒ½ä½¿ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€å‰ä¸€åä¸ä¼šå‡ºé—®é¢˜ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> hasCycle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">head</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (head === <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = head, p2 = head.next</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (p1 !== <span class=\"literal\">null</span> &amp;&amp; p2 !== <span class=\"literal\">null</span> &amp;&amp; p2.next !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p1 === p2) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    p1 = p1.next</span><br><span class=\"line\">    p2 = p2.next.next</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"7-æœ€é•¿å­åºåˆ—\"><a href=\"#7-æœ€é•¿å­åºåˆ—\" class=\"headerlink\" title=\"7. æœ€é•¿å­åºåˆ—\"></a>7. æœ€é•¿å­åºåˆ—</h1><p>LeetCode 524</p>\n<p>Input:<br>s = â€œabpcpleaâ€, d = [â€œaleâ€,â€appleâ€,â€monkeyâ€,â€pleaâ€]</p>\n<p>Output:<br>â€œappleâ€</p>\n<p>é¢˜ç›®æè¿°ï¼šåˆ é™¤ s ä¸­çš„ä¸€äº›å­—ç¬¦ï¼Œä½¿ä¹‹èƒ½æ„æˆ d åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºèƒ½æ„æˆçš„æœ€é•¿å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²é•¿åº¦ç›¸åŒï¼Œåˆ™å–å­—å…¸åºæœ€å°çš„ã€‚</p>\n<p>é€šè¿‡åˆ é™¤ s ä¸­çš„ä¸€äº›å­—ç¬¦è·å¾—å­—ç¬¦ä¸² tï¼Œå¯ä»¥è®¤ä¸º t æ˜¯ s çš„å­ä¸²åºåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŒæŒ‡é’ˆåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­åºåˆ—</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> findLongestWord = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s, d</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> longestCode = <span class=\"string\">''</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> cur <span class=\"keyword\">of</span> d) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> l1 = longestCode.length, l2 = cur.length</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l1 &gt; l2 || (l1 === l2 &amp;&amp; cur &gt; longestCode))</span><br><span class=\"line\">      <span class=\"keyword\">continue</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isSubStr(s, cur)) &#123;</span><br><span class=\"line\">      longestCode = cur</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> longestCode</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isSubStr = <span class=\"function\">(<span class=\"params\">s, target</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i &lt; s.length &amp;&amp; j &lt; target.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s[i] === target[j]) &#123;</span><br><span class=\"line\">      j++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    i++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> j === target.length</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["algorithm"],"tags":["LeetCode"]},{"title":"è¯¦è§£Setã€Mapã€WeakSet å’Œ WeakMap","url":"https://xivier.github.io/2019/06/22/Setã€Mapã€WeakSetã€WeakMap/","content":"<p>Set å’Œ Map ä¸»è¦çš„åº”ç”¨åœºæ™¯åœ¨äº <strong>æ•°æ®é‡ç»„</strong> å’Œ <strong>æ•°æ®å‚¨å­˜</strong></p>\n<p>Set æ˜¯ä¸€ç§å«åš<strong>é›†åˆ</strong>çš„æ•°æ®ç»“æ„ï¼ŒMap æ˜¯ä¸€ç§å«åš<strong>å­—å…¸</strong>çš„æ•°æ®ç»“æ„</p>\n<h3 id=\"é›†åˆï¼ˆSetï¼‰\"><a href=\"#é›†åˆï¼ˆSetï¼‰\" class=\"headerlink\" title=\"é›†åˆï¼ˆSetï¼‰\"></a>é›†åˆï¼ˆSetï¼‰</h3><p>ES6 æ–°å¢çš„ä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜æ˜¯å”¯ä¸€ä¸”æ— åºçš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p>\n<p><strong>Set æœ¬èº«æ˜¯ä¸€ç§æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Set æ•°æ®ç»“æ„ã€‚</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([iterable])</span><br></pre></td></tr></table></figure>\n\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const s = new Set()</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>].forEach(x =&gt; s.add(x))</span><br><span class=\"line\"></span><br><span class=\"line\">for (let i of s) &#123;</span><br><span class=\"line\">    console.log(i)\t<span class=\"comment\">// 1 2 3 4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å»é‡æ•°ç»„çš„é‡å¤å¯¹è±¡</span></span><br><span class=\"line\">let arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">[... new Set(arr)]\t<span class=\"comment\">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>\n\n<p>Set å¯¹è±¡å…è®¸ä½ å‚¨å­˜ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œæ— è®ºæ˜¯åŸå§‹å€¼æˆ–è€…æ˜¯å¯¹è±¡å¼•ç”¨ã€‚</p>\n<p>å‘ Set åŠ å…¥å€¼çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥<code>5</code>å’Œ<code>&quot;5&quot;</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ã€‚Set å†…éƒ¨åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸åŒï¼Œä½¿ç”¨çš„ç®—æ³•å«åšâ€œSame-value-zero equalityâ€ï¼Œå®ƒç±»ä¼¼äº<strong>ç²¾ç¡®ç›¸ç­‰</strong>è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯<strong><code>NaN</code>ç­‰äºè‡ªèº«ï¼Œè€Œç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦è®¤ä¸º<code>NaN</code>ä¸ç­‰äºè‡ªèº«ã€‚</strong></p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">set</span> = <span class=\"keyword\">new</span> Set();</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = NaN;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = NaN;</span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"keyword\">add</span>(a);</span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"keyword\">add</span>(b);</span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"comment\">// Set &#123;NaN&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> set1 = <span class=\"keyword\">new</span> Set()</span><br><span class=\"line\">set1.<span class=\"keyword\">add</span>(<span class=\"number\">5</span>)</span><br><span class=\"line\">set1.<span class=\"keyword\">add</span>(<span class=\"string\">'5'</span>)</span><br><span class=\"line\">console.log([...set1])\t<span class=\"comment\">// [5, \"5\"]</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Set å®ä¾‹å±æ€§</p>\n<ul>\n<li><p>constructorï¼š æ„é€ å‡½æ•°</p>\n</li>\n<li><p>sizeï¼šå…ƒç´ æ•°é‡</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let <span class=\"built_in\">set</span> = <span class=\"built_in\">new</span> Set([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(<span class=\"built_in\">set</span>.<span class=\"built_in\">length</span>)<span class=\"comment\">\t// undefined</span></span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(<span class=\"built_in\">set</span>.size)<span class=\"comment\">\t// 3</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>Set å®ä¾‹æ–¹æ³•</p>\n<ul>\n<li><p>æ“ä½œæ–¹æ³•</p>\n<ul>\n<li><p>add(value)ï¼šæ–°å¢ï¼Œç›¸å½“äº arrayé‡Œçš„push</p>\n</li>\n<li><p>delete(value)ï¼šå­˜åœ¨å³åˆ é™¤é›†åˆä¸­value</p>\n</li>\n<li><p>has(value)ï¼šåˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨ value</p>\n</li>\n<li><p>clear()ï¼šæ¸…ç©ºé›†åˆ</p>\n<hr>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">set</span> = <span class=\"keyword\">new</span> Set()</span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"built_in\">add</span>(<span class=\"number\">1</span>).<span class=\"built_in\">add</span>(<span class=\"number\">2</span>).<span class=\"built_in\">add</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"built_in\">has</span>(<span class=\"number\">1</span>)\t// true</span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"built_in\">has</span>(<span class=\"number\">3</span>)\t// false</span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"keyword\">delete</span>(<span class=\"number\">1</span>)\t</span><br><span class=\"line\"><span class=\"keyword\">set</span>.<span class=\"built_in\">has</span>(<span class=\"number\">1</span>)\t// false</span><br></pre></td></tr></table></figure>\n\n<p><code>Array.from</code> æ–¹æ³•å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> items = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>])</span><br><span class=\"line\"><span class=\"keyword\">const</span> array = <span class=\"built_in\">Array</span>.from(items)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(array)\t<span class=\"comment\">// [1, 2, 3]</span></span><br><span class=\"line\"><span class=\"comment\">// æˆ–</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arr = [...items]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr)\t<span class=\"comment\">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>éå†æ–¹æ³•ï¼ˆéå†é¡ºåºä¸ºæ’å…¥é¡ºåºï¼‰</p>\n<ul>\n<li><p>keys()ï¼šè¿”å›ä¸€ä¸ªåŒ…å«é›†åˆä¸­æ‰€æœ‰é”®çš„è¿­ä»£å™¨</p>\n</li>\n<li><p>values()ï¼šè¿”å›ä¸€ä¸ªåŒ…å«é›†åˆä¸­æ‰€æœ‰å€¼å¾—è¿­ä»£å™¨</p>\n</li>\n<li><p>entries()ï¼šè¿”å›ä¸€ä¸ªåŒ…å«Setå¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ å¾—é”®å€¼å¯¹è¿­ä»£å™¨</p>\n</li>\n<li><p>forEach(callbackFn, thisArg)ï¼šç”¨äºå¯¹é›†åˆæˆå‘˜æ‰§è¡ŒcallbackFnæ“ä½œï¼Œå¦‚æœæä¾›äº† thisArg å‚æ•°ï¼Œå›è°ƒä¸­çš„thisä¼šæ˜¯è¿™ä¸ªå‚æ•°ï¼Œ<strong>æ²¡æœ‰è¿”å›å€¼</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">set</span> = new Set([1, 2, 3])</span><br><span class=\"line\">console.log(<span class=\"keyword\">set</span>.keys())\t// SetIterator &#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">set</span>.values())\t// SetIterator &#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">set</span>.entries())\t// SetIterator &#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> item <span class=\"keyword\">of</span> <span class=\"keyword\">set</span>.keys()) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(item);</span><br><span class=\"line\">&#125;\t<span class=\"comment\">// 1\t2\t 3</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> item <span class=\"keyword\">of</span> <span class=\"keyword\">set</span>.entries()) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(item);</span><br><span class=\"line\">&#125;\t<span class=\"comment\">// [1, 1]\t[2, 2]\t[3, 3]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span>.forEach((value, key) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(key + <span class=\"string\">' : '</span> + value)</span><br><span class=\"line\">&#125;)\t<span class=\"comment\">// 1 : 1\t2 : 2\t3 : 3</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([...set])\t<span class=\"comment\">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>\n\n<p>Set å¯é»˜è®¤éå†ï¼Œé»˜è®¤è¿­ä»£å™¨ç”Ÿæˆå‡½æ•°æ˜¯ values() æ–¹æ³•</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Set</span>.prototype[<span class=\"built_in\">Symbol</span>.iterator] === <span class=\"built_in\">Set</span>.prototype.values\t<span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<p>æ‰€ä»¥ï¼Œ Setå¯ä»¥ä½¿ç”¨ mapã€filter æ–¹æ³•</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let <span class=\"built_in\">set</span> = <span class=\"built_in\">new</span> Set([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])</span><br><span class=\"line\"><span class=\"built_in\">set</span> = <span class=\"built_in\">new</span> Set([...<span class=\"built_in\">set</span>].map(<span class=\"keyword\">item</span> =&gt; <span class=\"keyword\">item</span> * <span class=\"number\">2</span>))</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>([...<span class=\"built_in\">set</span>])<span class=\"comment\">\t// [2, 4, 6]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">set</span> = <span class=\"built_in\">new</span> Set([...<span class=\"built_in\">set</span>].<span class=\"built_in\">filter</span>(<span class=\"keyword\">item</span> =&gt; (<span class=\"keyword\">item</span> &gt;= <span class=\"number\">4</span>)))</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>([...<span class=\"built_in\">set</span>])<span class=\"comment\">\t//[4, 6]</span></span><br></pre></td></tr></table></figure>\n\n<p>å› æ­¤ï¼ŒSet å¾ˆå®¹æ˜“å®ç°äº¤é›†ï¼ˆIntersectï¼‰ã€å¹¶é›†ï¼ˆUnionï¼‰ã€å·®é›†ï¼ˆDifferenceï¼‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> set1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])</span><br><span class=\"line\"><span class=\"keyword\">let</span> set2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> intersect = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([...set1].filter(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> set2.has(value)))</span><br><span class=\"line\"><span class=\"keyword\">let</span> union = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([...set1, ...set2])</span><br><span class=\"line\"><span class=\"keyword\">let</span> difference = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([...set1].filter(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> !set2.has(value)))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(intersect)\t<span class=\"comment\">// Set &#123;2, 3&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(union)\t\t<span class=\"comment\">// Set &#123;1, 2, 3, 4&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(difference)\t<span class=\"comment\">// Set &#123;1&#125;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-WeakSet\"><a href=\"#2-WeakSet\" class=\"headerlink\" title=\"2. WeakSet\"></a>2. WeakSet</h3><p>WeakSet å¯¹è±¡å…è®¸ä½ å°†<strong>å¼±å¼•ç”¨å¯¹è±¡</strong>å‚¨å­˜åœ¨ä¸€ä¸ªé›†åˆä¸­</p>\n<p>WeakSet ä¸ Set çš„åŒºåˆ«ï¼š</p>\n<ul>\n<li>WeakSet åªèƒ½å‚¨å­˜å¯¹è±¡å¼•ç”¨ï¼Œä¸èƒ½å­˜æ”¾å€¼ï¼Œè€Œ Set å¯¹è±¡éƒ½å¯ä»¥</li>\n<li>WeakSet å¯¹è±¡ä¸­å‚¨å­˜çš„å¯¹è±¡å€¼éƒ½æ˜¯è¢«å¼±å¼•ç”¨çš„ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„åº”ç”¨ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å˜é‡æˆ–å±æ€§å¼•ç”¨è¿™ä¸ªå¯¹è±¡å€¼ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«åƒåœ¾å›æ”¶æ‰ï¼ˆä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜åœ¨äº WeakSet ä¸­ï¼‰ï¼Œæ‰€ä»¥ï¼ŒWeakSet å¯¹è±¡é‡Œæœ‰å¤šå°‘ä¸ªæˆå‘˜å…ƒç´ ï¼Œå–å†³äºåƒåœ¾å›æ”¶æœºåˆ¶æœ‰æ²¡æœ‰è¿è¡Œï¼Œè¿è¡Œå‰åæˆå‘˜ä¸ªæ•°å¯èƒ½ä¸ä¸€è‡´ï¼Œéå†ç»“æŸä¹‹åï¼Œæœ‰çš„æˆå‘˜å¯èƒ½å–ä¸åˆ°äº†ï¼ˆè¢«åƒåœ¾å›æ”¶äº†ï¼‰ï¼ŒWeakSet å¯¹è±¡æ˜¯æ— æ³•è¢«éå†çš„ï¼ˆES6 è§„å®š WeakSet ä¸å¯éå†ï¼‰ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•æ‹¿åˆ°å®ƒåŒ…å«çš„æ‰€æœ‰å…ƒç´ </li>\n</ul>\n<p>å±æ€§ï¼š</p>\n<ul>\n<li><p>constructorï¼šæ„é€ å‡½æ•°ï¼Œä»»ä½•ä¸€ä¸ªå…·æœ‰ Iterable æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½œå‚æ•°</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const arr = <span class=\"string\">[[1, 2], [3, 4]]</span></span><br><span class=\"line\">const weakset = new WeakSet(arr)</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(weakset)</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><a href=\"https://user-images.githubusercontent.com/19721451/54000884-27290900-4184-11e9-92f0-4d19ac6d080b.png\" target=\"_blank\" rel=\"noopener\"><img src=\"assets/54000884-27290900-4184-11e9-92f0-4d19ac6d080b.png\" alt=\"2019-03-08 9 24 34\"></a></p>\n<p>æ–¹æ³•ï¼š</p>\n<ul>\n<li>add(value)ï¼šåœ¨WeakSet å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ value</li>\n<li>has(value)ï¼šåˆ¤æ–­ WeakSet å¯¹è±¡ä¸­æ˜¯å¦åŒ…å«value</li>\n<li>delete(value)ï¼šåˆ é™¤å…ƒç´  value</li>\n<li>clear()ï¼šæ¸…ç©ºæ‰€æœ‰å…ƒç´ ï¼Œ<strong>æ³¨æ„è¯¥æ–¹æ³•å·²åºŸå¼ƒ</strong></li>\n</ul>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var <span class=\"keyword\">ws</span> = <span class=\"keyword\">new</span> WeakSet()</span><br><span class=\"line\">var obj = &#123;&#125;</span><br><span class=\"line\">var foo = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ws</span>.<span class=\"built_in\">add</span>(window)</span><br><span class=\"line\"><span class=\"keyword\">ws</span>.<span class=\"built_in\">add</span>(obj)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ws</span>.<span class=\"built_in\">has</span>(window)\t// true</span><br><span class=\"line\"><span class=\"keyword\">ws</span>.<span class=\"built_in\">has</span>(foo)\t// false</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ws</span>.<span class=\"keyword\">delete</span>(window)\t// true</span><br><span class=\"line\"><span class=\"keyword\">ws</span>.<span class=\"built_in\">has</span>(window)\t// false</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-å­—å…¸ï¼ˆMapï¼‰\"><a href=\"#3-å­—å…¸ï¼ˆMapï¼‰\" class=\"headerlink\" title=\"3. å­—å…¸ï¼ˆMapï¼‰\"></a>3. å­—å…¸ï¼ˆMapï¼‰</h3><p>é›†åˆ ä¸ å­—å…¸ çš„åŒºåˆ«ï¼š</p>\n<ul>\n<li>å…±åŒç‚¹ï¼šé›†åˆã€å­—å…¸ å¯ä»¥å‚¨å­˜ä¸é‡å¤çš„å€¼</li>\n<li>ä¸åŒç‚¹ï¼šé›†åˆ æ˜¯ä»¥ [value, value]çš„å½¢å¼å‚¨å­˜å…ƒç´ ï¼Œå­—å…¸ æ˜¯ä»¥ [key, value] çš„å½¢å¼å‚¨å­˜</li>\n</ul>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> m = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> o = &#123;p: <span class=\"string\">'haha'</span>&#125;</span><br><span class=\"line\">m.<span class=\"keyword\">set</span>(o, <span class=\"string\">'content'</span>)</span><br><span class=\"line\">m.<span class=\"keyword\">get</span>(o)\t<span class=\"comment\">// content</span></span><br><span class=\"line\"></span><br><span class=\"line\">m.has(o)\t<span class=\"comment\">// true</span></span><br><span class=\"line\">m.delete(o)\t<span class=\"comment\">// true</span></span><br><span class=\"line\">m.has(o)\t<span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>ä»»ä½•å…·æœ‰ Iterator æ¥å£ã€ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„</strong>éƒ½å¯ä»¥å½“ä½œ<code>Map</code>æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">set</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([</span><br><span class=\"line\">  [<span class=\"string\">'foo'</span>, <span class=\"number\">1</span>],</span><br><span class=\"line\">  [<span class=\"string\">'bar'</span>, <span class=\"number\">2</span>]</span><br><span class=\"line\">]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> m1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>(<span class=\"keyword\">set</span>);</span><br><span class=\"line\">m1.<span class=\"keyword\">get</span>(<span class=\"string\">'foo'</span>) <span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> m2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>([[<span class=\"string\">'baz'</span>, <span class=\"number\">3</span>]]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> m3 = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>(m2);</span><br><span class=\"line\">m3.<span class=\"keyword\">get</span>(<span class=\"string\">'baz'</span>) <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœè¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>().<span class=\"keyword\">get</span>(<span class=\"string\">'asfddfsasadf'</span>)</span><br><span class=\"line\"><span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼Œåªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMap ç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚è¿™ä¸€ç‚¹è¦éå¸¸å°å¿ƒã€‚</p>\n<figure class=\"highlight processing\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">map</span> = <span class=\"keyword\">new</span> Map();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>([<span class=\"string\">'a'</span>], <span class=\"number\">555</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">get</span>([<span class=\"string\">'a'</span>]) <span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç çš„<code>set</code>å’Œ<code>get</code>æ–¹æ³•ï¼Œè¡¨é¢æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸¤ä¸ªå€¼ï¼Œå†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤<code>get</code>æ–¹æ³•æ— æ³•è¯»å–è¯¥é”®ï¼Œè¿”å›<code>undefined</code>ã€‚</p>\n<p>ç”±ä¸Šå¯çŸ¥ï¼ŒMap çš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§ä¸åŸä½œè€…çš„å±æ€§åŒåã€‚</p>\n<p>å¦‚æœ Map çš„é”®æ˜¯ä¸€ä¸ªç®€å•ç±»å‹çš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ŒMap å°†å…¶è§†ä¸ºä¸€ä¸ªé”®ï¼Œæ¯”å¦‚<code>0</code>å’Œ<code>-0</code>å°±æ˜¯ä¸€ä¸ªé”®ï¼Œå¸ƒå°”å€¼<code>true</code>å’Œå­—ç¬¦ä¸²<code>true</code>åˆ™æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚å¦å¤–ï¼Œ<code>undefined</code>å’Œ<code>null</code>ä¹Ÿæ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚è™½ç„¶<code>NaN</code>ä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½† Map å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚</p>\n<figure class=\"highlight processing\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let <span class=\"built_in\">map</span> = <span class=\"keyword\">new</span> Map();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>(<span class=\"number\">-0</span>, <span class=\"number\">123</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">get</span>(+<span class=\"number\">0</span>) <span class=\"comment\">// 123</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>(<span class=\"keyword\">true</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>(<span class=\"string\">'true'</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">get</span>(<span class=\"keyword\">true</span>) <span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>(undefined, <span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>(<span class=\"keyword\">null</span>, <span class=\"number\">4</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">get</span>(undefined) <span class=\"comment\">// 3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">set</span>(NaN, <span class=\"number\">123</span>);</span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">get</span>(NaN) <span class=\"comment\">// 123</span></span><br></pre></td></tr></table></figure>\n\n<p>Map çš„å±æ€§åŠæ–¹æ³•</p>\n<p>å±æ€§ï¼š</p>\n<ul>\n<li><p>constructorï¼šæ„é€ å‡½æ•°</p>\n</li>\n<li><p>sizeï¼šè¿”å›å­—å…¸ä¸­æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">map</span> = <span class=\"keyword\">new</span> Map([</span><br><span class=\"line\">  [<span class=\"string\">'name'</span>, <span class=\"string\">'An'</span>],</span><br><span class=\"line\">  [<span class=\"string\">'des'</span>, <span class=\"string\">'JS'</span>]</span><br><span class=\"line\">]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">map</span>.<span class=\"built_in\">size</span> <span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>æ“ä½œæ–¹æ³•ï¼š</p>\n<ul>\n<li>set(key, value)ï¼šå‘å­—å…¸ä¸­æ·»åŠ æ–°å…ƒç´ </li>\n<li>get(key)ï¼šé€šè¿‡é”®æŸ¥æ‰¾ç‰¹å®šçš„æ•°å€¼å¹¶è¿”å›</li>\n<li>has(key)ï¼šåˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨é”®key</li>\n<li>delete(key)ï¼šé€šè¿‡é”® key ä»å­—å…¸ä¸­ç§»é™¤å¯¹åº”çš„æ•°æ®</li>\n<li>clear()ï¼šå°†è¿™ä¸ªå­—å…¸ä¸­çš„æ‰€æœ‰å…ƒç´ åˆ é™¤</li>\n</ul>\n<p>éå†æ–¹æ³•</p>\n<ul>\n<li>Keys()ï¼šå°†å­—å…¸ä¸­åŒ…å«çš„æ‰€æœ‰é”®åä»¥è¿­ä»£å™¨å½¢å¼è¿”å›</li>\n<li>values()ï¼šå°†å­—å…¸ä¸­åŒ…å«çš„æ‰€æœ‰æ•°å€¼ä»¥è¿­ä»£å™¨å½¢å¼è¿”å›</li>\n<li>entries()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„è¿­ä»£å™¨</li>\n<li>forEach()ï¼šéå†å­—å…¸çš„æ‰€æœ‰æˆå‘˜</li>\n</ul>\n<figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> map = new Map([</span><br><span class=\"line\">            [<span class=\"string\">'name'</span>, <span class=\"string\">'An'</span>],</span><br><span class=\"line\">            [<span class=\"string\">'des'</span>, <span class=\"string\">'JS'</span>]</span><br><span class=\"line\">        ])<span class=\"comment\">;</span></span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(map.entries())\t// MapIterator &#123;<span class=\"string\">\"name\"</span> =&gt; <span class=\"string\">\"An\"</span>, <span class=\"string\">\"des\"</span> =&gt; <span class=\"string\">\"JS\"</span>&#125;</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(map.keys()) // MapIterator &#123;<span class=\"string\">\"name\"</span>, <span class=\"string\">\"des\"</span>&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Map ç»“æ„çš„é»˜è®¤éå†å™¨æ¥å£ï¼ˆ<code>Symbol.iterator</code>å±æ€§ï¼‰ï¼Œå°±æ˜¯<code>entries</code>æ–¹æ³•ã€‚</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">map</span>[Symbol.iterator] === <span class=\"built_in\">map</span>.entries</span><br><span class=\"line\"><span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<p>Map ç»“æ„è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ã€‚</p>\n<p>å¯¹äº forEach ï¼Œçœ‹ä¸€ä¸ªä¾‹å­</p>\n<figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const reporter = &#123;</span><br><span class=\"line\">  report: <span class=\"keyword\">function</span><span class=\"built_in\">(key</span>, <span class=\"keyword\">value</span>) &#123;</span><br><span class=\"line\">    console.log(<span class=\"string\">\"Key: %s, Value: %s\"</span>,<span class=\"built_in\"> key</span>, <span class=\"keyword\">value</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">map</span> = new Map([</span><br><span class=\"line\">    [<span class=\"string\">'name'</span>, <span class=\"string\">'An'</span>],</span><br><span class=\"line\">    [<span class=\"string\">'des'</span>, <span class=\"string\">'JS'</span>]</span><br><span class=\"line\">])</span><br><span class=\"line\"><span class=\"keyword\">map</span>.forEach(<span class=\"keyword\">function</span>(<span class=\"keyword\">value</span>,<span class=\"built_in\"> key</span>, <span class=\"keyword\">map</span>) &#123;</span><br><span class=\"line\">  this.report<span class=\"built_in\">(key</span>, <span class=\"keyword\">value</span>);</span><br><span class=\"line\">&#125;, reporter);</span><br><span class=\"line\">// Key:<span class=\"built_in\"> name</span>, Value: An</span><br><span class=\"line\">// Key: des, Value: JS</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ forEach æ–¹æ³•çš„å›è°ƒå‡½æ•°çš„ thisï¼Œå°±æŒ‡å‘ reporter</p>\n<p><strong>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„ç›¸äº’è½¬æ¢</strong></p>\n<ol>\n<li><p>Map è½¬ Array</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const map = new Map(<span class=\"string\">[[1, 1], [2, 2], [3, 3]]</span>)</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>([...map])\t// <span class=\"string\">[[1, 1], [2, 2], [3, 3]]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Array è½¬ Map</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const map = new Map([[<span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">2</span>, <span class=\"number\">2</span>], [<span class=\"number\">3</span>, <span class=\"number\">3</span>]])</span><br><span class=\"line\">console.log(map)\t<span class=\"comment\">// Map &#123;1 =&gt; 1, 2 =&gt; 2, 3 =&gt; 3&#125;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Map è½¬ Object</p>\n<p>å› ä¸º Object çš„é”®åéƒ½ä¸ºå­—ç¬¦ä¸²ï¼Œè€ŒMap çš„é”®åä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥è½¬æ¢çš„æ—¶å€™ä¼šæŠŠéå­—ç¬¦ä¸²é”®åè½¬æ¢ä¸ºå­—ç¬¦ä¸²é”®åã€‚</p>\n<figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> mapToObj(<span class=\"keyword\">map</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = Object.create(null)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> <span class=\"built_in\">[key</span>, <span class=\"keyword\">value</span>] <span class=\"keyword\">of</span> <span class=\"keyword\">map</span>) &#123;</span><br><span class=\"line\">        obj<span class=\"built_in\">[key</span>] = <span class=\"keyword\">value</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const <span class=\"keyword\">map</span> = new Map().set(<span class=\"string\">'name'</span>, <span class=\"string\">'An'</span>).set(<span class=\"string\">'des'</span>, <span class=\"string\">'JS'</span>)</span><br><span class=\"line\">mapToObj(<span class=\"keyword\">map</span>)  // <span class=\"built_in\">&#123;name</span>: <span class=\"string\">\"An\"</span>, des: <span class=\"string\">\"JS\"</span>&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object è½¬ Map</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">objToMap</span><span class=\"params\">(obj)</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"keyword\">map</span> = <span class=\"keyword\">new</span> Map()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key of Object.<span class=\"built_in\">keys</span>(obj)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">map</span>.<span class=\"keyword\">set</span>(key, obj[key])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">map</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">objToMap(&#123;<span class=\"string\">'name'</span>: <span class=\"string\">'An'</span>, <span class=\"string\">'des'</span>: <span class=\"string\">'JS'</span>&#125;) // Map &#123;<span class=\"string\">\"name\"</span> =&gt; <span class=\"string\">\"An\"</span>, <span class=\"string\">\"des\"</span> =&gt; <span class=\"string\">\"JS\"</span>&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Map è½¬ JSON</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mapToJson</span><span class=\"params\">(map)</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> JSON.stringify([...<span class=\"keyword\">map</span>])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"keyword\">map</span> = <span class=\"keyword\">new</span> Map().<span class=\"keyword\">set</span>(<span class=\"string\">'name'</span>, <span class=\"string\">'An'</span>).<span class=\"keyword\">set</span>(<span class=\"string\">'des'</span>, <span class=\"string\">'JS'</span>)</span><br><span class=\"line\">mapToJson(<span class=\"keyword\">map</span>)\t// [[<span class=\"string\">\"name\"</span>,<span class=\"string\">\"An\"</span>],[<span class=\"string\">\"des\"</span>,<span class=\"string\">\"JS\"</span>]]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>JSON è½¬ Map</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title\">jsonToStrMap</span>(jsonStr) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"type\">objToMap(JSON.parse(jsonStr))</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">jsonToStrMap('&#123;<span class=\"string\">\"name\"</span>: <span class=\"string\">\"An\"</span>, <span class=\"string\">\"des\"</span>: <span class=\"string\">\"JS\"</span>&#125;') // Map &#123;<span class=\"string\">\"name\"</span> =&gt; <span class=\"string\">\"An\"</span>, <span class=\"string\">\"des\"</span> =&gt; <span class=\"string\">\"JS\"</span>&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h3 id=\"4-WeakMap\"><a href=\"#4-WeakMap\" class=\"headerlink\" title=\"4. WeakMap\"></a>4. WeakMap</h3><p>WeakMap å¯¹è±¡æ˜¯ä¸€ç»„é”®å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­çš„<strong>é”®æ˜¯å¼±å¼•ç”¨å¯¹è±¡ï¼Œè€Œå€¼å¯ä»¥æ˜¯ä»»æ„</strong>ã€‚</p>\n<p><strong>æ³¨æ„ï¼ŒWeakMap å¼±å¼•ç”¨çš„åªæ˜¯é”®åï¼Œè€Œä¸æ˜¯é”®å€¼ã€‚é”®å€¼ä¾ç„¶æ˜¯æ­£å¸¸å¼•ç”¨ã€‚</strong></p>\n<p>WeakMap ä¸­ï¼Œæ¯ä¸ªé”®å¯¹è‡ªå·±æ‰€å¼•ç”¨å¯¹è±¡çš„å¼•ç”¨éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œåœ¨æ²¡æœ‰å…¶ä»–å¼•ç”¨å’Œè¯¥é”®å¼•ç”¨åŒä¸€å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«åƒåœ¾å›æ”¶ï¼ˆç›¸åº”çš„keyåˆ™å˜æˆæ— æ•ˆçš„ï¼‰ï¼Œæ‰€ä»¥ï¼ŒWeakMap çš„ key æ˜¯ä¸å¯æšä¸¾çš„ã€‚</p>\n<p>å±æ€§ï¼š</p>\n<ul>\n<li>constructorï¼šæ„é€ å‡½æ•°</li>\n</ul>\n<p>æ–¹æ³•ï¼š</p>\n<ul>\n<li>has(key)ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ key å…³è”å¯¹è±¡</li>\n<li>get(key)ï¼šè¿”å›keyå…³è”å¯¹è±¡ï¼ˆæ²¡æœ‰åˆ™åˆ™è¿”å› undefinedï¼‰</li>\n<li>set(key)ï¼šè®¾ç½®ä¸€ç»„keyå…³è”å¯¹è±¡</li>\n<li>delete(key)ï¼šç§»é™¤ key çš„å…³è”å¯¹è±¡</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'logo'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> myWeakmap = <span class=\"keyword\">new</span> <span class=\"built_in\">WeakMap</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">myWeakmap.set(myElement, &#123;<span class=\"attr\">timesClicked</span>: <span class=\"number\">0</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">myElement.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> logoData = myWeakmap.get(myElement);</span><br><span class=\"line\">  logoData.timesClicked++;</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-æ€»ç»“\"><a href=\"#5-æ€»ç»“\" class=\"headerlink\" title=\"5. æ€»ç»“\"></a>5. æ€»ç»“</h3><ul>\n<li>Set<ul>\n<li>æˆå‘˜å”¯ä¸€ã€æ— åºä¸”ä¸é‡å¤</li>\n<li>[value, value]ï¼Œé”®å€¼ä¸é”®åæ˜¯ä¸€è‡´çš„ï¼ˆæˆ–è€…è¯´åªæœ‰é”®å€¼ï¼Œæ²¡æœ‰é”®åï¼‰</li>\n<li>å¯ä»¥éå†ï¼Œæ–¹æ³•æœ‰ï¼šaddã€deleteã€has</li>\n</ul>\n</li>\n<li>WeakSet<ul>\n<li>æˆå‘˜éƒ½æ˜¯å¯¹è±¡</li>\n<li>æˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜DOMèŠ‚ç‚¹ï¼Œä¸å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼</li>\n<li>ä¸èƒ½éå†ï¼Œæ–¹æ³•æœ‰addã€deleteã€has</li>\n</ul>\n</li>\n<li>Map<ul>\n<li>æœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œç±»ä¼¼é›†åˆ</li>\n<li>å¯ä»¥éå†ï¼Œæ–¹æ³•å¾ˆå¤šå¯ä»¥è·Ÿå„ç§æ•°æ®æ ¼å¼è½¬æ¢</li>\n</ul>\n</li>\n<li>WeakMap<ul>\n<li>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnullé™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®å</li>\n<li>é”®åæ˜¯å¼±å¼•ç”¨ï¼Œé”®å€¼å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œé”®åæ‰€æŒ‡å‘çš„å¯¹è±¡å¯ä»¥è¢«åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶é”®åæ˜¯æ— æ•ˆçš„</li>\n<li>ä¸èƒ½éå†ï¼Œæ–¹æ³•æœ‰getã€setã€hasã€delete</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"6-æ‰©å±•ï¼šObjectä¸Setã€Map\"><a href=\"#6-æ‰©å±•ï¼šObjectä¸Setã€Map\" class=\"headerlink\" title=\"6. æ‰©å±•ï¼šObjectä¸Setã€Map\"></a>6. æ‰©å±•ï¼šObjectä¸Setã€Map</h3><ol>\n<li><p>Object ä¸ Set</p>\n<figure class=\"highlight processing\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Object</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> properties1 = &#123;</span><br><span class=\"line\">    <span class=\"string\">'width'</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"string\">'height'</span>: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(properties1[<span class=\"string\">'width'</span>]? <span class=\"keyword\">true</span>: <span class=\"keyword\">false</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Set</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> properties2 = <span class=\"keyword\">new</span> Set()</span><br><span class=\"line\">properties2.<span class=\"built_in\">add</span>(<span class=\"string\">'width'</span>)</span><br><span class=\"line\">properties2.<span class=\"built_in\">add</span>(<span class=\"string\">'height'</span>)</span><br><span class=\"line\">console.<span class=\"built_in\">log</span>(properties2.has(<span class=\"string\">'width'</span>)) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object ä¸ Map</p>\n</li>\n</ol>\n<p>JS ä¸­çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆhash ç»“æ„ï¼‰</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">data</span> = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> element = document.getElementsByClassName(<span class=\"string\">'App'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">data</span>[element] = <span class=\"string\">'metadata'</span>;</span><br><span class=\"line\">console.log(<span class=\"keyword\">data</span>[<span class=\"string\">'[object HTMLCollection]'</span>]) <span class=\"comment\">// \"metadata\"</span></span><br></pre></td></tr></table></figure>\n\n<p>ä½†å½“ä»¥ä¸€ä¸ªDOMèŠ‚ç‚¹ä½œä¸ºå¯¹è±¡ data çš„é”®ï¼Œå¯¹è±¡ä¼šè¢«è‡ªåŠ¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸²[Object HTMLCollection]ï¼Œæ‰€ä»¥è¯´ï¼ŒObject ç»“æ„æä¾›äº† <strong>å­—ç¬¦ä¸²-å€¼</strong> å¯¹åº”ï¼ŒMapåˆ™æä¾›äº† <strong>å€¼-å€¼</strong> çš„å¯¹åº”</p>\n","categories":["FrontEnd"],"tags":["JavaScript"]},{"title":"setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«","url":"https://xivier.github.io/2019/05/01/setTimeoutã€Promiseã€Asyncå’ŒAwaitçš„åŒºåˆ«/","content":"<h3 id=\"æè¿°\"><a href=\"#æè¿°\" class=\"headerlink\" title=\"æè¿°\"></a>æè¿°</h3><p>æ€»ç»“ä¸€ä¸‹ setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«</p>\n<h3 id=\"æ­£æ–‡\"><a href=\"#æ­£æ–‡\" class=\"headerlink\" title=\"æ­£æ–‡\"></a>æ­£æ–‡</h3><p>æˆ‘è§‰å¾—è¿™é¢˜ä¸»è¦æ˜¯è€ƒå¯Ÿè¿™ä¸‰è€…åœ¨äº‹ä»¶å¾ªç¯ä¸­çš„åŒºåˆ«ï¼Œäº‹ä»¶å¾ªç¯ä¸­åˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>\n<p>å…¶ä¸­settimeoutçš„å›è°ƒå‡½æ•°æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰åˆ°æ‰§è¡Œæ ˆæ¸…ç©ºä»¥åæ‰§è¡Œï¼›</p>\n<p>promise.thené‡Œçš„å›è°ƒå‡½æ•°ä¼šæ”¾åˆ°ç›¸åº”å®ä»»åŠ¡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰å®ä»»åŠ¡é‡Œé¢çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œå†æ‰§è¡Œï¼›asyncå‡½æ•°è¡¨ç¤ºå‡½æ•°é‡Œé¢å¯èƒ½ä¼šæœ‰å¼‚æ­¥æ–¹æ³•ï¼Œawaitåé¢è·Ÿä¸€ä¸ªè¡¨è¾¾å¼ï¼Œasyncæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œé‡åˆ°awaitä¼šç«‹å³æ‰§è¡Œè¡¨è¾¾å¼ï¼Œç„¶åæŠŠè¡¨è¾¾å¼åé¢çš„ä»£ç æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œè®©å‡ºæ‰§è¡Œæ ˆè®©åŒæ­¥ä»£ç å…ˆæ‰§è¡Œã€‚</p>\n<p>å…·ä½“çœ‹çœ‹å§</p>\n<h4 id=\"setTimeout\"><a href=\"#setTimeout\" class=\"headerlink\" title=\"setTimeout\"></a>setTimeout</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>)\t<span class=\"comment\">//1. æ‰“å° script start</span></span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'settimeout'</span>)\t<span class=\"comment\">// 4. æ‰“å° settimeout</span></span><br><span class=\"line\">&#125;)\t<span class=\"comment\">// 2. è°ƒç”¨ setTimeout å‡½æ•°ï¼Œå¹¶å®šä¹‰å…¶å®Œæˆåæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>)\t<span class=\"comment\">//3. æ‰“å° script start</span></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºé¡ºåºï¼šscript start-&gt;script end-&gt;settimeout</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h4><p>Promiseæœ¬èº«æ˜¯<strong>åŒæ­¥çš„ç«‹å³æ‰§è¡Œå‡½æ•°</strong>ï¼Œ å½“åœ¨executorä¸­æ‰§è¡Œresolveæˆ–è€…rejectçš„æ—¶å€™, æ­¤æ—¶æ˜¯å¼‚æ­¥æ“ä½œï¼Œ ä¼šå…ˆæ‰§è¡Œthen/catchç­‰ï¼Œå½“ä¸»æ ˆå®Œæˆåï¼Œæ‰ä¼šå»è°ƒç”¨resolve/rejectä¸­å­˜æ”¾çš„æ–¹æ³•æ‰§è¡Œï¼Œæ‰“å°pçš„æ—¶å€™ï¼Œæ˜¯æ‰“å°çš„è¿”å›ç»“æœï¼Œä¸€ä¸ªPromiseå®ä¾‹ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>)</span><br><span class=\"line\"><span class=\"keyword\">let</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">    resolve()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1 end'</span>)</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'settimeout'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºé¡ºåº: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout</span></span><br></pre></td></tr></table></figure>\n\n<p>å½“JSä¸»çº¿ç¨‹æ‰§è¡Œåˆ°Promiseå¯¹è±¡æ—¶ï¼Œ</p>\n<ul>\n<li>promise1.then() çš„å›è°ƒå°±æ˜¯ä¸€ä¸ª task</li>\n<li>promise1 æ˜¯ resolvedæˆ–rejected: é‚£è¿™ä¸ª task å°±ä¼šæ”¾å…¥å½“å‰äº‹ä»¶å¾ªç¯å›åˆçš„ microtask queue</li>\n<li>promise1 æ˜¯ pending: è¿™ä¸ª task å°±ä¼šæ”¾å…¥ äº‹ä»¶å¾ªç¯çš„æœªæ¥çš„æŸä¸ª(å¯èƒ½ä¸‹ä¸€ä¸ª)å›åˆçš„ microtask queue ä¸­</li>\n<li>setTimeout çš„å›è°ƒä¹Ÿæ˜¯ä¸ª task ï¼Œå®ƒä¼šè¢«æ”¾å…¥ macrotask queue å³ä½¿æ˜¯ 0ms çš„æƒ…å†µ</li>\n</ul>\n<h4 id=\"async-await\"><a href=\"#async-await\" class=\"headerlink\" title=\"async/await\"></a>async/await</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 end'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'async2'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>);</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºé¡ºåºï¼šscript start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end</span></span><br></pre></td></tr></table></figure>\n\n<p>async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯è®©å‡ºäº†çº¿ç¨‹ï¼Œè·³å‡ºäº† async å‡½æ•°ä½“ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(func1())</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://camo.githubusercontent.com/127fb6994c3e219bae33573cc46aab7f97b7367b/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303139303133313137343431333536322e706e67\" target=\"_blank\" rel=\"noopener\"><img src=\"assets/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303139303133313137343431333536322e706e67.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></a><br>å¾ˆæ˜¾ç„¶ï¼Œfunc1çš„è¿è¡Œç»“æœå…¶å®å°±æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨thenæ¥å¤„ç†åç»­é€»è¾‘ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);  <span class=\"comment\">// 30</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>awaitçš„å«ä¹‰ä¸ºç­‰å¾…ï¼Œä¹Ÿå°±æ˜¯ async å‡½æ•°éœ€è¦ç­‰å¾…awaitåçš„å‡½æ•°æ‰§è¡Œå®Œæˆå¹¶ä¸”æœ‰äº†è¿”å›ç»“æœï¼ˆPromiseå¯¹è±¡ï¼‰ä¹‹åï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚awaité€šè¿‡è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡æ¥å®ç°åŒæ­¥çš„æ•ˆæœã€‚</p>\n","categories":["FrontEnd"],"tags":["JavaScript"]},{"title":"å…³äºmapé—®é¢˜","url":"https://xivier.github.io/2019/04/22/map(parseInt)/","content":"<h3 id=\"æè¿°\"><a href=\"#æè¿°\" class=\"headerlink\" title=\"æè¿°\"></a>æè¿°</h3><p>[â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt)ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>\n<h3 id=\"æ­£æ–‡\"><a href=\"#æ­£æ–‡\" class=\"headerlink\" title=\"æ­£æ–‡\"></a>æ­£æ–‡</h3><p>ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™ä¸ªé¢˜ç›®çš„æ—¶å€™ï¼Œè„‘æµ·è·³å‡ºçš„ç­”æ¡ˆæ˜¯ [1, 2, 3]ï¼Œä½†æ˜¯<strong>çœŸæ­£çš„ç­”æ¡ˆæ˜¯[1, NaN, NaN]</strong>ã€‚</p>\n<ul>\n<li>é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ï¼Œmapå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°callbackï¼š</li>\n</ul>\n<p><code>var new_array = arr.map(function callback(currentValue[, index[, array]]) { // Return element for new_array }[, thisArg])</code><br>è¿™ä¸ªcallbackä¸€å…±å¯ä»¥æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨å½“å‰è¢«å¤„ç†çš„å…ƒç´ ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨è¯¥å…ƒç´ çš„ç´¢å¼•ã€‚</p>\n<ul>\n<li>è€ŒparseIntåˆ™æ˜¯ç”¨æ¥è§£æå­—ç¬¦ä¸²çš„ï¼Œä½¿å­—ç¬¦ä¸²æˆä¸ºæŒ‡å®šåŸºæ•°çš„æ•´æ•°ã€‚<br><code>parseInt(string, radix)</code><br>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºè¢«å¤„ç†çš„å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºä¸ºè§£ææ—¶çš„åŸºæ•°ã€‚</li>\n<li>äº†è§£è¿™ä¸¤ä¸ªå‡½æ•°åï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸‹è¿è¡Œæƒ…å†µ</li>\n</ul>\n<ol>\n<li>parseInt(â€˜1â€™, 0) //radixä¸º0æ—¶ï¼Œä¸”stringå‚æ•°ä¸ä»¥â€œ0xâ€å’Œâ€œ0â€å¼€å¤´æ—¶ï¼ŒæŒ‰ç…§10ä¸ºåŸºæ•°å¤„ç†ã€‚è¿™ä¸ªæ—¶å€™è¿”å›1</li>\n<li>parseInt(â€˜2â€™, 1) //åŸºæ•°ä¸º1ï¼ˆ1è¿›åˆ¶ï¼‰è¡¨ç¤ºçš„æ•°ä¸­ï¼Œæœ€å¤§å€¼å°äº2ï¼Œæ‰€ä»¥æ— æ³•è§£æï¼Œè¿”å›NaN</li>\n<li>parseInt(â€˜3â€™, 2) //åŸºæ•°ä¸º2ï¼ˆ2è¿›åˆ¶ï¼‰è¡¨ç¤ºçš„æ•°ä¸­ï¼Œæœ€å¤§å€¼å°äº3ï¼Œæ‰€ä»¥æ— æ³•è§£æï¼Œè¿”å›NaN</li>\n</ol>\n<ul>\n<li>mapå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æœ€åç»“æœä¸º[1, NaN, NaN]</li>\n</ul>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ä¸»è¦è¦ææ¸…æ¥šä¼ å…¥çš„å‚æ•°ï¼Œmapå¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ é€šè¿‡å›è°ƒå‡½æ•°è¿›è¡Œæ˜ å°„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯¥å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯¥å…ƒç´ çš„ç´¢å¼•ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå‚æ•°ä¼ é€’ç»™mapä¸­çš„å›è°ƒå‡½æ•°ã€‚</p>\n<p>ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯åœ¨mapä¸­è‡ªå®šä¹‰å›è°ƒå‡½æ•°ï¼Œç„¶åå¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œè¿™é‡Œæ˜¯ä½¿ç”¨ parseInt å½“åšå›è°ƒå‡½æ•°ï¼ŒparseInt çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¢«å¤„ç†çš„å€¼ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºåŸºæ•°ï¼Œå°† k è¿›åˆ¶æ•°è½¬æˆ 10 è¿›åˆ¶æ•°çš„ï¼Œæ‰€ä»¥ map æ—¶æ¯æ¬¡çš„ index éƒ½ä¼šå½“åšåŸºæ•°ä¼ å…¥ã€‚</p>\n","categories":["FrontEnd"],"tags":["JavaScript"]},{"title":"about","url":"https://xivier.github.io/about/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"https://xivier.github.io/category/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"https://xivier.github.io/search/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"https://xivier.github.io/project/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"https://xivier.github.io/tag/index.html","content":"","categories":[],"tags":[]}]